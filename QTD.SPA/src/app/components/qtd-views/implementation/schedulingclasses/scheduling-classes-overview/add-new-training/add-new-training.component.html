<mat-toolbar class="h-28 app-toolbar-sticky w-full">
  <app-button type="button" ButtonType="icon" icon="keyboard_arrow_left" (clicked)="goBack()">
  </app-button>
  <div class="flex flex-row items-center space-x-4 w-full justify-between">
    <h1>Add New Training</h1>
    <div class="justify-between">
      <app-button type="button" variant="text" text="Cancel" *ngIf="currentIndex === 25" (clicked)="goBack()"
        style="margin-right: 2rem">
      </app-button>
      <app-button type="button" text="Continue" [disabled]="trainingForm.invalid || (trainingForm.valid && this.isDateTimeValid)" *ngIf="currentIndex === 0"
        (clicked)="saveInfo()">
      </app-button>
      <app-button type="button" text="Continue" *ngIf="currentIndex === 1 || currentIndex === 2" (clicked)="goNext()">
      </app-button>
      <app-button type="button" text="Publish" *ngIf="currentIndex === 3" (clicked)="goBack()">
      </app-button>
    </div>
  </div>
</mat-toolbar>
<mat-stepper labelPosition="bottom" [linear]="true" #stepper (selectionChange)="selectedChanged($event)"
  [orientation]="(stepperOrientation | async)!">
  <!-- Change edit icon -->
  <ng-template matStepperIcon="edit">
    <app-icon icon="done"></app-icon>
  </ng-template>

  <mat-step label="Training Details" [completed]="disableValidation === true ? true : trainingForm.valid && !this.isDateTimeValid">
    <div class="flex w-full" style="justify-content: center">
      <div style="width: 70%" class="flex flex-col">
        <!-- Provider And ILA Section -->
        <section class="flex flex-row border-gray-one pt-4 pb-4 rounded-sm">
          <div class="flex flex-col bg-white mat-elevation-z3 p-4 ml-3" style="width: 100%">
            <span class="text-lg font-bold ml-2">Select Provider & {{("ILA" | labelReplacement)| async}}</span>
            <form [formGroup]="trainingForm">
              <div class="">
                <div class="flex flex-row mb-3">
                  <div class="flex flex-col float-left mb-6 w-full m-2">
                    <app-label [for]="'provider'" [text]="'Provider '" class="label required"></app-label>

                    <mat-form-field appearance="outline" class="text-sm dropdown w-full">
                      <mat-select formControlName="providerId" placeholder="Select Provider" class="
                          appearance-none
                          rounded
                          border
                          w-full
                          px-4
                          py-2.5
                          align-item-end
                          bg-white
                        " (selectionChange)="selectProvider($event.value)" #select="matSelect">
                        <input matInput class="pt-3 pb-3 pl-3" type="text" formControlName="searchTxt" (input)="providerSearch()"  (blur) = "resetProviderSearch()" (keydown)="handleKeydown($event)" placeholder="Enter Text to Search">
                        <mat-option *ngFor="let i of provider_list" [value]="i.id">
                          {{ i.name }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <app-input-error *ngIf="noProviderFound" text="No Provider found"></app-input-error>
                  </div>
                  <div class="flex flex-col float-left mb-2 w-full m-2">
                    <app-label [for]="'ila'" text="{{('ILA' | labelReplacement)| async}}" class="label required"></app-label>
                    <mat-form-field appearance="outline" class="text-sm dropdown w-full"
                      [floatLabel]="isILALoading ? 'never' : 'auto'">
                      <mat-select #selectControl [disabled]="isILALoading" (selectionChange)="selectILA($event.value)"
                        [panelClass]="
                          isILALoading || !isOpen
                            ? 'hide-deferred-select-dummy-option'
                            : ''
                        " class="
                          appearance-none
                          rounded
                          border
                          w-full
                          px-4
                          py-2.5
                          align-item-end
                          bg-white
                        " formControlName="ilaId" placeholder="Select {{('ILA' | labelReplacement)| async}}" required #selectIla="matSelect">
                        <input (keyup)="ilaSearch()" formControlName="ilaSearch" class="pt-3 pb-3 pl-3" type="text" (input)="ilaSearch()"  (blur) = "resetIlaSearch()" (keydown)="handleKeydown($event)" placeholder="Enter Text to Search">
                        <mat-option *ngFor="let option of ila_list" [value]="option.id">
                          <span *ngIf="option.number !== '' || option.number !== undefined || option.number !== null">{{ option.number }} - {{ option.name }}</span>
                          <span *ngIf="option.number === '' || option.number === undefined || option.number === null">{{ option.name }}</span>
                        </mat-option>
                      </mat-select>
                      <app-spinner *ngIf="isILALoading" class="spinner internal-spinner"></app-spinner>
                    </mat-form-field>
                    <app-input-error *ngIf="noILAFound" text="No {{('ILA | labelReplacement)| async}} found"></app-input-error>
                    <app-input-error *ngIf="
                        !noILAFound &&
                        trainingForm.get('ILA')?.invalid &&
                        trainingForm.get('ILA')?.hasError('required')
                      " text="'{{('ILA' | labelReplacement)| async}} is Required'">
                    </app-input-error>
                  </div>
                </div>
              </div>
            </form>
            <div class="ml-2" *ngIf="trainingForm.get('ilaId')?.invalid === false" >
              <span *ngIf="isSelfPaced === true">{{("ILA" | labelReplacement)| async}} Type: <b>Self Paced</b></span>
              <span *ngIf="isSelfPaced !== true">{{("ILA" | labelReplacement)| async}} Type: <b>Classroom-Based </b></span>
            </div>
            <div class="ml-2" *ngIf="deliveryMethodName !== ''">
              <span>Delivery Method: <b>{{ deliveryMethodName }}</b></span><br/>
              Use EMP For {{("ILA" | labelReplacement)| async}}: <mat-checkbox [checked]="isIlaUseForEMP?.useForEMP" class="example-margin" (change)="changeIla($event.checked,isIlaUseForEMP)"></mat-checkbox>
            </div>
            <form [formGroup]="trainingForm">
            <div class="flex items-center space-x-2 float-left ml-2" *ngIf="isChecked && isCoursePubliclyAvailable">
              Is {{("ILA" | labelReplacement)| async}} Publicly Available? <app-icon
          matTooltip="Selecting this option will make this course available in the Public Portal for external registration. You can disable this option for specific classes under Scheduling Classes"
          class="text-gray-400 hover:text-blue-500 transition-colors duration-150 cursor-pointer pb-4" icon="help"></app-icon>
                   <mat-checkbox formControlName="isPubliclyAvailableClass" class="ml-2" [disabled]="setCheckboxValue"></mat-checkbox>
              
            </div>
            </form>
          </div>
        </section>

        <!-- Date and Time Section -->
        <section class="flex flex-row border-gray-one pt-4 pb-4 rounded-sm">
          <div class="flex flex-col bg-white mat-elevation-z3 p-4 ml-3" style="width: 100%">
            <span class="text-lg font-bold ml-2">Class Details</span>
            <form [formGroup]="trainingForm">
              <div class="">
                <div class="flex flex-row mb-1">
                  <div class="flex flex-col float-left mb-6 w-full m-2">
                    <app-label [for]="'startDate'" [text]="'Start Date '" class="label required"></app-label>
                    <app-date formControlName="startDate" [maxDate]="trainingForm.get('endDate')?.value" (change)="onStartDateSelect()"></app-date>
                  </div>
                  <div class="flex flex-col float-left mb-6 w-full m-2">
                    <app-label [for]="'startTime'" [text]="'Start Time '"  class="label" [ngClass]="{'label required':trainingForm.get('startTime')?.hasError('required')===true}" class="label"></app-label>
                    <mat-form-field appearance="outline">
                      <input matInput type="time" formControlName="startTime" (change)="onTimeSelected()" />
                    </mat-form-field>
                  </div>
                  <div class="flex flex-col float-left mb-6 w-full m-2">
                    <app-label [for]="'endDate'" [text]="'End Date '" class="label required" ></app-label>
                    <app-date formControlName="endDate" [minDate]="trainingForm.get('startDate')?.value"  (change)="onEndDateSelect()"></app-date>
                  </div>
                  <div class="flex flex-col float-left mb-6 w-full m-2">
                    <app-label [for]="'endTime'" [text]="'End Time'" class="label" [ngClass]="{'label required':trainingForm.get('endTime')?.hasError('required')===true}"></app-label>
                    <mat-form-field appearance="outline">
                      <input matInput type="time" formControlName="endTime" (change)="onTimeSelected()" [min]="trainingForm.get('startTime')?.value"/>
                    </mat-form-field>
                  </div>
                  
                </div>
                <div>
                  <app-input-error *ngIf="isDateTimeValid"
                      [text]="'End Date and Time should be greater than Start Date and Time'">
                  </app-input-error>
                </div>
                    <div class="">
                      <div class="flex flex-row mb-6">
                        <div class="flex flex-col float-left mb-6 w-full m-2">
                          <app-label [for]="'instructor'" text="{{('Instructor' | labelReplacement)| async}}" class="label" [ngClass]="(isIlaUseForEMP?.isSelfPaced ?? false) === false ? 'required':''"></app-label>
                          <mat-select formControlName="instructorId" placeholder="Select {{('Instructor' | labelReplacement)| async}}" class="
                              appearance-none
                              rounded
                              border
                              w-full
                              px-4
                              py-2.5
                              align-item-end
                              bg-white
                            ">
                            <mat-option *ngFor="let p of instructor_list" [value]="p.id">
                              {{ p.instructorName }}
                            </mat-option>
                            <mat-select-trigger class="select-trigger">
                              {{ getInstructorNameById(trainingForm.get('instructorId').value) || 'Select Instructor' }}
                              <button class="btn" mat-icon-button >
                              <mat-icon class="mat-icon" (click)="clearInstructor($event)">clear</mat-icon>
                          </button>
                          </mat-select-trigger>
                          </mat-select>
                          <app-input-error *ngIf="
                              trainingForm.get('instructorId')?.invalid &&
                              trainingForm.get('instructorId')?.hasError('required')
                              "text="{{('Instructor' | labelReplacement)| async}} is Required">
                          </app-input-error>
                        </div>
                        <!-- <p *ngIf="trainingForm.get('instructorId')?.invalid === false">Instructor Id is invalid</p> -->
                        <div class="flex flex-col float-left mb-6 w-full m-2">
                          <app-label [for]="'location'" text="{{('Location' | labelReplacement)| async}}" class="label" [ngClass]="(isIlaUseForEMP?.isSelfPaced ?? false) === false ? 'required':''"></app-label>
                          <mat-select formControlName="locationId" placeholder="Select {{('Location' | labelReplacement)| async}}" class="
                              appearance-none
                              rounded
                              border
                              w-full
                              px-4
                              py-2.5
                              align-item-end
                              bg-white
                            ">
                            <mat-option *ngFor="let p of location_list" [value]="p.id">
                              {{ p?.locName }}
                            </mat-option>
                            <mat-select-trigger class="select-trigger">
                              {{ getLocationNameById(trainingForm.get('locationId').value) || 'Select Location' }}
                              <button class="btn" mat-icon-button (click)="clearLocation($event)">
                                <mat-icon class="mat-icon">clear</mat-icon>
                              </button>
                            </mat-select-trigger>
                          </mat-select>
                          <app-input-error *ngIf="
                              trainingForm.get('locationId')?.invalid &&
                              trainingForm.get('locationId')?.hasError('required')
                            " [text]="'Location is Required'">
                          </app-input-error>
                        </div>
                      </div>
                    </div>
                    <div class="flex flex-col float-left mb-6 w-full m-2">
                      <div class="class-size">
                        <app-label [for]="'Class Size'" [text]="'Class Size '" class="label required"></app-label>
                       </div>
                      <div style="width: 20%" class="mt-1">
                        <app-textbox formControlName="classSize" (keypress)="keyPressNumbers($event)"></app-textbox>
                        <small class="text-danger"
                        *ngIf="trainingForm.get('classSize')?.dirty && trainingForm.get('classSize')?.hasError('required')">Class Size is
                        Required</small>
                      </div>
                      <span class="text-gray-400 py-2">Class size includes both manual enrollment and self-registration</span>
                    </div>
                    <div class="mb-2 ml-2">
                      <app-label
                        class="label"
                        [for]="'changeRecurrence'"
                        [text]="'Make this event recurring'"
                      ></app-label>
                      <div>
                      <app-button
                        name="changeRecurrence"
                        [disabled]="trainingForm.invalid"
                        type="button"
                        size="sm"
                        [text]="!this.recurrenceType ? 'Make Recurrence' : 'Change Recurrence'"
                        (click)="changeRecurrence(recurrenceFlyIn)"
                      ></app-button>
                      <span class="text-qtd ml-3" *ngIf="this.recurrenceType">
                        <span *ngIf="this.recurrenceType !== 'Daily'"> Every </span>
                        <span>{{ this.recurrenceDescription }} starting on {{ this.trainingForm.get("startDate")?.value | date: "MM-dd-yyyy" }} to {{ this.endDate | date: "MM-dd-yyyy" }}</span>
                        <span *ngIf="this.recurrenceType !== 'Daily' && this.recursEveryNumber > 1">, recurring every {{ this.recursEveryNumber }} {{ this.recurrenceType === "Weekly" ? "weeks" : this.recurrenceType === "Monthly" ? "months" : "" }}</span>
                      </span>
                    </div>
                </div>
                <span class="text-gray-400 ml-2">Recurring training events will have the same {{("Instructor" | labelReplacement)| async}} and {{("Location" | labelReplacement)| async}}s information added for each event</span>
                <div class="mt-3">
                  <mat-accordion>
                    <mat-expansion-panel style="background-color: #5c9b310f">
                      <mat-expansion-panel-header>
                        <mat-panel-title>
                          <p class="text-qtd">Recurring Schedule</p>
                        </mat-panel-title>
                      </mat-expansion-panel-header>
                      <table [dataSource]="dataSource" mat-table matSort style="border: 1px solid #e5e7eb"
                        class="w-full mb-4">
                        <ng-container matColumnDef="startDate">
                          <th mat-header-cell *matHeaderCellDef mat-sort-header>
                            Start Date
                          </th>
                          <td mat-cell *matCellDef="let element">
                            {{
                            datePipe.transform(
                            element._startDate,
                            "MM-dd-yyyy hh:mm a"
                            )
                            }}
                          </td>
                        </ng-container>
                        <ng-container matColumnDef="endDate">
                          <th mat-header-cell *matHeaderCellDef mat-sort-header>
                            End Date
                          </th>
                          <td mat-cell *matCellDef="let element">
                            {{
                            datePipe.transform(
                            element._endDate,
                            "MM-dd-yyyy hh:mm a"
                            )
                            }}
                          </td>
                        </ng-container>
                        <ng-container matColumnDef="location">
                          <th mat-header-cell *matHeaderCellDef mat-sort-header>
                            {{("Location" | labelReplacement)| async}}s
                          </th>
                          <td mat-cell *matCellDef="let element">
                            {{ element.locationName }}
                          </td>
                        </ng-container>
                        <ng-container matColumnDef="instructor">
                          <th mat-header-cell *matHeaderCellDef mat-sort-header>
                            {{("Instructor" | labelReplacement)| async}}
                          </th>
                          <td mat-cell *matCellDef="let element">
                            {{ element.instructorName }}
                          </td>
                        </ng-container>
                        <ng-container matColumnDef="isClassPubliclyAvailable" >
                          <th mat-header-cell *matHeaderCellDef mat-sort-header>
                            Is {{("ILA" | labelReplacement)| async}} Publicly Available?<app-icon
                  matTooltip="Unselecting Publicly Available for a given class will not make class available for self-registration in the Public Portal. Only internal employees will be able to self-register via EMP"
                  class="font-medium text-gray-400 mr-2 sm pl-1" icon="help"></app-icon></th>
                          <td mat-cell *matCellDef="let element">
                           <mat-checkbox 
                           (change)="onTogglePubliclyAvailable($event, element)"
                           [checked]="element.isClassPubliclyAvailable" [disabled]="element.disableCheckbox"></mat-checkbox>
                          </td>
                        </ng-container>
                        <ng-container matColumnDef="action">
                          <th mat-header-cell *matHeaderCellDef mat-sort-header></th>
                          <td mat-cell *matCellDef="let element">
                            <div class="
                                flex flex-row
                                items-center
                                text-gray-four
                                btn-group
                              ">
                              <button
                                mat-icon-button
                                [matMenuTriggerFor]="menu"
                              >
                                <app-icon icon="more_horiz"></app-icon>
                              </button>
                              <mat-menu #menu="matMenu">
                                <div class="flex flex-row">
                                  <label mat-menu-item (click)="deleteSingleRecurrTraining(deleteSignleRecurrTraining,element,element.id)" [disabled]="element.classSchedule_Employee?.length > 0">Delete</label>
                                  <app-icon class="pt-3" icon="help_outline" *ngIf="element.classSchedule_Employee?.length > 0" matTooltip="The Delete option is not available due to linked data"></app-icon>
                                </div>
                           </mat-menu>
                            </div>
                          </td>

                        </ng-container>
                        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

                        <tr class="mat-row flex text-center" *matNoDataRow>
                          <td class="mat-cell w-full mt-2">
                            No schedules found
                          </td>
                        </tr>
                      </table>
                    </mat-expansion-panel>
                  </mat-accordion>
                </div>
              </div>
            </form>
          </div>
        </section>
        <!-- Course Instruction Section -->
        <section class="flex flex-row border-gray-one pt-4 pb-4 rounded-sm">
          <div class="flex flex-col bg-white mat-elevation-z3 p-4 ml-3" style="width: 100%">
            <span class="text-lg font-bold ml-2">Course  {{("Instruction" | labelReplacement)| async}}s</span>
            <form [formGroup]="trainingForm">
              <div class="">
                <div class="flex flex-row mb-12">
                  <div class="flex flex-col float-left mb-6 w-full m-2">
                    <div>
                      <div class="flex flex-row w-full">
                        <div class="flex flex-col w-full">
                          <!-- <app-label [for]="'instructions'" [text]="'Instructions'" class="mt-6 float-left label"></app-label> -->
                          <ckeditor name="instructions" [editor]="editor" formControlName="courseInstruction">
                          </ckeditor>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </form>
          </div>
        </section>

        <!-- Webinar section -->
        <section class="flex flex-row border-gray-one pt-4 pb-4 rounded-sm">
          <div class="flex flex-col bg-white mat-elevation-z3 p-4 ml-3" style="width: 100%">
            <span class="text-lg font-bold ml-2">Webinar Link</span>
            <form [formGroup]="trainingForm">
              <div class="">
                <div class="flex flex-row mb-12" style="width: 50%">
                  <div class="flex flex-col float-left mb-6 w-full m-2">
                    <span>Copy/Paste your webinar link below:</span>
                    <app-textbox formControlName="webLink"></app-textbox>
                  </div>
                </div>
              </div>
            </form>
          </div>
        </section>
      </div>
    </div>
  </mat-step>
  <mat-step label="Manage Tests and Evaluations" [completed]="trainingId===''?false:true">
    <div class="flex w-full" style="justify-content: center">
      <div style="width: 70%" class="flex flex-col">
        <div class="w-full">
          <div class="flex flex-row justify-between ml-4 mb-3" style="align-items: baseline">
            <div>
              <span class="font-bold text-lg" style="width: 50%">{{
                viewSelected
                }}</span>
            </div>
            <div class="flex">
              <button (click)="ToggleClassesGroupBy('Segments Review')" class="p-2 toggleCalender" style="
                  outline: none;
                  color: rgba(122, 128, 126, 1);
                  font-weight: medium;
                  border: 1px solid rgba(122, 128, 126, 0.2);
                " [ngStyle]="
                  viewSelected === 'Segments Review'
                    ? {
                        'background-color': 'rgba(92, 155, 49,0.1)',
                        color: 'rgba(92, 155, 49, 1)',
                        border: '1px solid rgba(92, 155, 49, 1)'
                      }
                    : {
                        'background-color': 'white',
                        color: 'rgba(122, 128, 126, 1)',
                        border: '1px solid rgba(122, 128, 126, 0.2)'
                      }
                ">
                Segments Review
              </button>
              <div [matTooltip]="isIlaUseForEMP?.useForEMP ? '':(('ILA' | labelReplacement)| async) +' Not Used for EMP Releases'"
                class="toggleILA flex" [ngClass]="isIlaUseForEMP?.useForEMP ? 'activeButton':'disabledButton'">
                <button
                class="toggleILA p-2"
                [ngStyle]="
                viewSelected === 'EMP Settings'
                  ? {
                      'background-color': 'rgba(92, 155, 49,0.1)',
                      color: 'rgba(92, 155, 49, 1)',
                      border: '1px solid rgba(92, 155, 49, 1)'
                    }
                  : {
                      'background-color': 'white',
                      color: 'rgba(122, 128, 126, 1)',
                      border: '1px solid rgba(122, 128, 126, 0.2)'
                    }"
                  [ngClass]="isIlaUseForEMP?.useForEMP ? 'activeButton':'disabledButton'"
                  [disabled]="!isIlaUseForEMP?.useForEMP" (click)="ToggleClassesGroupBy('EMP Settings')"
                  >
              EMP Settings
            </button>
              </div>
            </div>
          </div>
          <div class="flex flex-col px-4 mb-4">
            <div class="
                border-gray-one border-0.5
                bg-white-one
                rounded
                pb-4
                pt-4
                pl-2
                pr-2
              ">
              <div class="flex flex-row justify-between">
                <div class="flex flex-col justify-between">
                  <p class="text-gray-400">
                    {{("ILA" | labelReplacement)| async}} Name & Number:
                  </p>
                  <span class="text-gray-900 font-medium" *ngIf="ilaName !== ''">
                    {{ ilaName }}</span>
                </div>

                <div class="flex flex-col justify-between">
                  <p class="text-gray-400">
                    Delievery method:
                  </p>
                  <span class="text-gray-900 font-medium" *ngIf="deliveryMethodName !== ''">
                    {{ deliveryMethodName }}</span>
                </div>
                <div class="flex flex-col justify-between">
                  <p class="text-gray-400" *ngIf="isTimeEmpty === false">
                    Start Date/Time:
                  </p>
                  <p class="text-gray-400" *ngIf="isTimeEmpty === true">
                    Start Date:
                  </p>
             <span  class="text-gray-900 font-medium">
                       {{trainingStartDateTime}}
             </span>
                </div>
                <div class="flex flex-col justify-between">
                  <p class="text-gray-400">
                    End Date/Time:
                  </p>
                    <span  class="text-gray-900 font-medium">
                      {{trainingEndtDateTime}}
                    </span>
                </div>
              </div>
            </div>
          </div>
          <div *ngIf="viewSelected === 'EMP Settings'">
            <mat-tab-group class="px-4" (selectedTabChange)="onTabChanged($event)">
              <!-- Test Release Tab -->
              <mat-tab label="Test Release">
                <app-ila-emp-test-settings #ilaTestRelease *ngIf="ilaId !== null && ilaId !== undefined && ilaId !== '' " [ilaId]="ilaId" [classScheduleId] = "trainingId"></app-ila-emp-test-settings>
              </mat-tab>
              <mat-tab label="CBT Release">
                <!-- CBT Release -->
                <app-cbt-manager *ngIf="ila !== null && ila !== undefined" [ila]="ila"></app-cbt-manager>
              </mat-tab>
              <mat-tab label="TQ Release">
                <!--TQ Release -->
                <app-ila-emp-tq-settings #ilaEmpTqSettings *ngIf="ilaId !== null && ilaId !== undefined && ilaId !== '' " [ilaId]="ilaId" [classScheduleId] = "trainingId"></app-ila-emp-tq-settings>
              </mat-tab>
              <mat-tab label="Evaluation Release">
                <!-- Evaluation Release -->
                <ng-container>
                  <p class="text-lg font-bold">Evaluation Released Settings</p>
                  <div class="flex flex-col">
                    <form [formGroup]="evalForm">
                      <div class="flex flex-row justify-end mb-2">
                        <app-button type="submit" size="sm" text="Save"
                          [disabled]="(evalForm.get('evaluationRequired')?.value === false && evalForm.get('evaluationUsedToDeployStudentEvaluation')?.value === false) && ((evalSelection.selected[0] === 'releaseOnSpecificTimeAfterClassEndDate' && evalForm.get('setAvailabilityTimeEvaluate')?.value === null) || evalSelection.selected.length < 1 || evalForm.get('evaluationDueDate')?.hasError('required') ?? false || true)"
                          (click)="saveInfoEvalRelease()">
                        </app-button>
                      </div>
                      <div class="
                          border-gray-one border-0.5
                          bg-white-one
                          rounded
                          mb-8
                          pb-4
                          pt-4
                          pl-16
                          pr-16
                        ">
                        <div class="flex flex-col mb-3">
                          <ul>
                            <li class="pt-3">
                              <mat-checkbox formControlName="evaluationRequired" [disabled]="true">
                                Evaluation is not required for this
                                {{("ILA" | labelReplacement)| async}}</mat-checkbox>
                            </li>
                            <li class="pt-3">
                              <mat-checkbox formControlName="evaluationUsedToDeployStudentEvaluation" [disabled]="true">
                                EMP will not be used to deploy Student Evaluations for this
                                {{("ILA" | labelReplacement)| async}}</mat-checkbox>
                            </li>
                          </ul>
                        </div>
                      </div>
                    </form>
                  </div>
                </ng-container>
                <ng-container>
                  <div class="flex flex-col">
                    <form [formGroup]="trainingForm">
                      <div class="
                          border-gray-one border-0.5
                          bg-white-one
                          rounded
                          mb-8
                          pb-4
                          pt-4
                          pl-16
                          pr-16
                        ">
                        <div class="flex flex-col mb-3">
                          <ul>
                            <li class="pt-2">
                              <div class="flex flex-col">
                                <div class="flex flex-row justify-between">
                                  <span class="text-lg font-bold">
                                    Student Evaluations linked to the {{("ILA" | labelReplacement)| async}}
                                  </span>
                                  <div class="flex flex-col">
                                    <app-button
                                      [disabled]="evaluationReleaseCheckNUll || evalForm.get('evaluationRequired')?.value === true || true"
                                      type="button" variant="text" (clicked)="openFlyInPanel(linkStudentEvaluators)"
                                      iconPosition="left" icon="link" text="Link Evaluation">

                                    </app-button>
                                    <app-input-error *ngIf="evaluationReleaseCheckNUll"
                                      text="Please Create Evaluation Settings"></app-input-error>
                                  </div>
                                </div>
                                <span class="text-gray-400 mb-3">{{student_Evaluation_List.length}} Evaluations
                                  linked</span>

                                <div class="mt-3">
                                  <mat-accordion>
                                    <mat-expansion-panel [disabled]="true" style="background-color: #5c9b310f"
                                      *ngFor="let item of student_Evaluation_List">
                                      <mat-expansion-panel-header>
                                        <mat-panel-title>
                                          <div class="flex flex-row justify-between w-full" style="align-items:center">

                                            <div>
                                              <div><span class="linkText font-bold">{{item.title}}</span></div>
                                            </div>

                                            <div>
                                              <div><mat-form-field floatLabel="never">
                                                  <mat-select [disabled]="true"  [value]="item?.ilA_StudentEvaluation_Links[0]?.studentEvalAudienceID??''"
                                                    placeholder="Select class to assign to assign to evaluation"
                                                    (selectionChange)="changeClass($event.value,item?.ilA_StudentEvaluation_Links[0]?.id??'')">
                                                    <mat-option  *ngFor="let i of audience" [value]="i.id">{{i.name}}</mat-option>

                                                  </mat-select>
                                                </mat-form-field></div>
                                            </div>

                                          </div>
                                        </mat-panel-title>
                                      </mat-expansion-panel-header>
                                      <table [dataSource]="item.classSchedule_StudentEvaluations_Links" mat-table
                                        matSort style="border: 1px solid #e5e7eb" class="w-full mb-4">
                                        <ng-container matColumnDef="id">
                                          <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                            #
                                          </th>
                                          <td mat-cell *matCellDef="let element; let i = index">
                                            {{i + 1}}
                                          </td>
                                        </ng-container>

                                        <ng-container matColumnDef="date">
                                          <th mat-header-cell *matHeaderCellDef>
                                            Class Date/Time
                                          </th>
                                          <td mat-cell *matCellDef="let element">
                                            {{ datePipe.transform(element.classSchedule.startDateTime, 'yyyy-MM-dd @
                                            hh:mm a') }}
                                          </td>
                                        </ng-container>

                                        <tr mat-header-row *matHeaderRowDef="displayedColumnsStudentEvaluators"></tr>
                                        <tr mat-row *matRowDef="
                                          let row;
                                          columns: displayedColumnsStudentEvaluators
                                        "></tr>

                                        <tr class="mat-row text-center" *matNoDataRow>
                                          <td [attr.colspan]="
                                        displayedColumnsStudentEvaluators.length
                                          " class="mat-cell text-center mt-2">
                                            No evaluators present in list
                                          </td>
                                        </tr>
                                      </table>
                                    </mat-expansion-panel>
                                  </mat-accordion>
                                </div>
                              </div>
                            </li>
                          </ul>
                        </div>
                      </div>
                    </form>
                  </div>
                </ng-container>
                <ng-container>
                  <div class="flex flex-col">
                    <form [formGroup]="evalForm">
                      <div class="
                          border-gray-one border-0.5
                          bg-white-one
                          rounded
                          mb-8
                          pb-4
                          pt-4
                          pl-16
                          pr-16
                        ">
                        <div class="flex flex-col mb-3">
                          <ul>
                            <li>
                              <mat-checkbox [checked]="evalForm.get('evaluationAvailableOnStartDate')?.value"
                                [disabled]="evalForm.get('evaluationRequired')?.value === true || evalForm.get('evaluationUsedToDeployStudentEvaluation')?.value === true || true"
                                (change)="uncheckOthers('evaluationAvailableOnStartDate',$event)"
                                formControlName="evaluationAvailableOnStartDate">Make Evaluation available
                                on class start date
                                and time</mat-checkbox>
                            </li>

                            <li>
                              <div class="flex flex-col">
                                <mat-checkbox [checked]="evalForm.get('evaluationAvailableOnEndDate')?.value"
                                  [disabled]="evalForm.get('evaluationRequired')?.value === true || evalForm.get('evaluationUsedToDeployStudentEvaluation')?.value === true || true"
                                  (change)="uncheckOthers('evaluationAvailableOnEndDate',$event)"
                                  formControlName="evaluationAvailableOnEndDate">Make Evaluation available on class end
                                  date
                                  and time</mat-checkbox>
                              </div>
                            </li>
                            <li class="pt-2" style="margin-left: 6rem">
                              <mat-checkbox formControlName="finalGradeRequired"
                                [checked]="evalForm.get('finalGradeRequired')?.value"
                                [disabled]="!evalForm.get('evaluationAvailableOnStartDate')?.value && !evalForm.get('evaluationAvailableOnEndDate')?.value || trainingForm.get('evaluationRequired')?.value === true || this.trainingForm.get('evaluationUsedToDeployStudentEvaluation')?.value === true || true">Final
                                grade required to release
                                Evaluation</mat-checkbox>
                            </li>

                            <li class="pt-2">
                              <div class="flex flex-col">
                                <mat-checkbox [checked]="evalForm.get('releaseOnSpecificTimeAfterClassEndDate')?.value"
                                  (change)="uncheckOthers('releaseOnSpecificTimeAfterClassEndDate',$event)"
                                  [disabled]="evalForm.get('evaluationRequired')?.value === true || evalForm.get('evaluationUsedToDeployStudentEvaluation')?.value === true || true"
                                  formControlName="releaseOnSpecificTimeAfterClassEndDate">Set specific time to make
                                  Evaluation
                                  available on class end date</mat-checkbox>
                                <div style="width: 25%" class="py-2 ml-5">
                                  <mat-select style="margin-right: 0px" formControlName="setAvailabilityTimeEvaluate"
                                    [disabled]="!evalForm.get('releaseOnSpecificTimeAfterClassEndDate')?.value || evalForm.get('evaluationRequired')?.value === true || evalForm.get('evaluationUsedToDeployStudentEvaluation')?.value === true || true"
                                    class="
                                      appearance-none
                                      rounded
                                      border
                                      w-full
                                      px-4
                                      py-2.5
                                      align-item-end
                                      bg-white
                                    ">
                                    <mat-option *ngFor="let item of testEval" [value]="item">{{
                                      item.timeSpan }}</mat-option>
                                  </mat-select>
                                </div>
                                <app-input-error
                                  *ngIf="(evalForm.get('evaluationRequired')?.value === false && evalForm.get('evaluationUsedToDeployStudentEvaluation')?.value === false) && evalForm.get('releaseOnSpecificTimeAfterClassEndDate')?.value && evalForm.get('setAvailabilityTimeEvaluate')?.value === null"
                                  text="Please Select Specific time to make Evaluation Available"></app-input-error>
                              </div>
                            </li>

                            <li class="pt-2">
                              <mat-checkbox (change)="uncheckOthers('releaseAfterGradeAssigned',$event)"
                                [checked]="evalForm.get('releaseAfterGradeAssigned')?.value"
                                [disabled]="evalForm.get('evaluationRequired')?.value === true || evalForm.get('evaluationUsedToDeployStudentEvaluation')?.value === true || true"
                                formControlName="releaseAfterGradeAssigned">Make Evaluation available after a grade is
                                assigned</mat-checkbox>
                            </li>
                            <li class="pt-2">
                              <app-input-error
                                *ngIf="(evalForm.get('evaluationRequired')?.value === false && evalForm.get('evaluationUsedToDeployStudentEvaluation')?.value === false) && evalSelection.selected.length < 1"
                                text="Please Select at least 1 option"></app-input-error>
                            </li>
                            <li class="pt-2">
                              <div class="flex flex-col">
                                <span>Evaluation Due Date</span>
                                <span class="text-gray-400">The number of days/weeks/months following the *class
                                  end date/time* students have to complete the
                                  Student Evaluation in EMP. After this due
                                  date, the Student Evaluation will be removed
                                  from EMP and Students will not be able to
                                  provide feedback.</span>
                                  <div class="border py-2 flex mt-3" style="width: 20%; align-items: center">
                                    <app-textbox [disabled]="evalForm.get('evaluationRequired')?.value === true || evalForm.get('evaluationUsedToDeployStudentEvaluation')?.value === true || true" formControlName="evaluationDueDate" (keypress)="keyPressNumbers($event)" [maxLength]="3" class="modifiedTextbox"></app-textbox>
                                    <mat-select [disabled]="evalForm.get('evaluationRequired')?.value === true || evalForm.get('evaluationUsedToDeployStudentEvaluation')?.value === true || true" formControlName="empSettingsReleaseType">
                                      <mat-option *ngFor="let type of empSettingsReleaseTypes" [value]="type.typeId">{{type.typeName}}</mat-option>
                                    </mat-select>
                                  </div>
                                </div>
                            </li>
                          </ul>
                        </div>
                      </div>
                    </form>
                  </div>
                </ng-container>
              </mat-tab>
            </mat-tab-group>
          </div>
          <div *ngIf="viewSelected === 'Segments Review'" class="px-4">
            <ng-container>
              <div class="flex flex-col">
                <form>
                  <div class="
                      border-gray-one border-0.5
                      bg-white-one
                      rounded
                      mb-8
                      pb-4
                      pt-4
                      pl-16
                      pr-16
                    ">
                    <div class="flex flex-col mb-3">
                      <ul *ngFor="let i of lsegs">
                        <li>
                          <span class="text-lg font-bold">
                            {{ i.title }}
                          </span>
                        </li>

                        <li>
                          <div class="flex flex-row justify-between">
                            <div>
                              <span class="text-gray-400"><i>{{deliveryMethodName}}</i></span>
                            </div>
                            <div>
                              <app-icon icon="access_time"></app-icon>
                              <span class="">
                                {{ i.duration }} mins
                              </span>
                            </div>
                          </div>
                        </li>
                        <div class="flex flex-row my-1" style="align-items:center;" *ngIf="i.isNercStandard">
                          <app-icon icon="check_circle_outline" class="text-qtd"></app-icon>
                              <span class="text-md ml-2">Standards Related hours</span>

                        </div>
                        <div class="flex flex-row mb-1" style="align-items:center;" *ngIf="i.isNercSimulation">
                          <app-icon icon="check_circle_outline" class="text-qtd"></app-icon>
                          <span class="text-md ml-2">Simulation Hours</span>

                        </div>
                        <div class="flex flex-row my-1" style="align-items:center;" *ngIf="i.isNercOperatingTopics">
                          <app-icon icon="check_circle_outline" class="text-qtd"></app-icon>
                          <span class="text-md ml-2">Operating Topic Hours</span>

                        </div>

                        <li class="pt-3">
                          <div class="flex flex-col">
                            <span class="font-bold" style="font-size: 16px">Segment Content</span>
                            <span class="mt-2 pt-4" [innerHtml]="i.content">
                            </span>
                          </div>
                        </li>
                        <li class="pt-2">
                          <div class="flex flex-col">
                            <p class="font-bold pt-4" style="font-size: 16px">
                              Segment Objectives
                            </p>
                            <table [dataSource]="i.segmentObjective_Link" mat-table
                              style="border: 1px solid #e5e7eb; width: 100%">
                              <ng-container matColumnDef="tasknumber">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                  #
                                </th>
                                <td mat-cell *matCellDef="let element" [ngStyle]="{'color':element.type=='Custom'?'orange':''}">
                                  {{ element.number }}
                                </td>
                              </ng-container>
                              <ng-container matColumnDef="type">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                  Type
                                </th>
                                <td mat-cell *matCellDef="let element">
                                  {{ element.type }}
                                </td>
                              </ng-container>
                              <ng-container matColumnDef="desc">
                                <th mat-header-cell *matHeaderCellDef>
                                  Description
                                </th>

                                <td mat-cell *matCellDef="let element" [ngStyle]="{'color':element.type=='Custom'?'orange':''}">
                                  {{ element.description }}
                                </td>
                              </ng-container>

                              <tr mat-header-row *matHeaderRowDef="displayedColumnsSegments"></tr>
                              <tr mat-row *matRowDef="
                                  let row;
                                  columns: displayedColumnsSegments"></tr>

                              <tr class="mat-row text-center" *matNoDataRow>
                                <td [attr.colspan]="
                                    displayedColumnsSegments.length
                                  " class="mat-cell text-center mt-2">
                                  No data present in {{("Task" | labelReplacement)| async}}
                                </td>
                              </tr>
                            </table>
                          </div>
                        </li>
                      </ul>
                    </div>
                  </div>
                </form>
              </div>
            </ng-container>
          </div>
        </div>
      </div>
    </div>
  </mat-step>
  <mat-step label="Enroll Students">
    <div class="flex w-full pt-4" style="justify-content: center">
      <div style="width: 70%" class="flex flex-col">
        <div class="
            border-gray-one border-0.5
            bg-white-one
            rounded
            pb-4
            pt-4
            pl-16
            pr-16
          ">
          <form [formGroup]="trainingForm">
            <div class="flex flex-row justify-end mb-2">
            </div>
            <div class="flex flex-col mb-3">
              <ul>
                <li>
                  <span class="text-lg font-bold">
                    Self Registration Options
                  </span>
                </li>

                <li class="pt-3 border-b-0.8">
                  <mat-checkbox formControlName="makeAvailableForSelfReg">Make Available for Self
                    Registration</mat-checkbox>
                </li>
                <li class="pt-3 ml-4" *ngIf="trainingForm.value.makeAvailableForSelfReg" >
                  <mat-checkbox formControlName="requireAdminApproval" (change)="enableSendEMail($event)" >Require Admin approval of
                    Registration</mat-checkbox>
                </li>
                <li class="pt-3" style="margin-left: 3rem" *ngIf="trainingForm.value.makeAvailableForSelfReg">
                  <mat-checkbox formControlName="sendApprovedEmail">Send {{("Employee" | labelReplacement)| async}} email when self-registration is
                    approved</mat-checkbox>
                </li>
                <li class="pt-3 ml-4">
                  <mat-checkbox formControlName="acknowledgeRegDisclaimer">Acknowledge Registration
                    Disclaimer</mat-checkbox>
                </li>
                <li class="pt-3 ml-4" *ngIf="trainingForm.value.makeAvailableForSelfReg" >
                  <ckeditor name="selfRegMessage" [editor]="editor" formControlName="regDisclaimer" [disabled]="!trainingForm.value.acknowledgeRegDisclaimer">
                  </ckeditor>
                </li>
                <li class="pt-3 ml-4" *ngIf="trainingForm.value.makeAvailableForSelfReg">
                  <mat-checkbox formControlName="limitForLinkedPositions">Limit self-registration for {{("Position" | labelReplacement)| async}}  linked
                    to
                    {{("ILA" | labelReplacement)| async}}:</mat-checkbox>
                    <ng-container *ngIf="linkedPositionToIla.length>0">
                      <p class="text-gray-400 ml-4" *ngFor="let item of linkedPositionToIla">{{item.positionTitle}}</p>
                    </ng-container>
                </li>
                <li class="pt-3 ml-4" *ngIf="trainingForm.value.makeAvailableForSelfReg">
                  <mat-checkbox formControlName="closeRegOnStartDate">Close Registration on Start Date</mat-checkbox>
                </li>
                <li class="pt-3 ml-4" *ngIf="trainingForm.value.makeAvailableForSelfReg">
                  <mat-checkbox formControlName="enableWaitlist">Show Waitlist Enabled</mat-checkbox>
                </li>
              </ul>
            </div>
          </form>

        </div>
      </div>
    </div>

    <app-data-loader *ngIf="!allSchedules"></app-data-loader>
    <div *ngIf="allSchedules" class="flex w-full pt-4 mt-3" style="justify-content: center">
      <div style="width: 70%" class="flex flex-col">
        <div class="flex flex-row justify-between mb-3">
          <span class="text-lg font-bold">Enrollments</span>

          <app-button text="Add {{('Employee' | labelReplacement)| async}}" icon="add" iconPosition="left" size="sm"
            (click)="openEnrollPanel(enrollEmployee, addEmpRecurrDialog)"></app-button>
        </div>
        <div *ngFor="let source of allSchedules; index as x" class="
            border-gray-one border-0.5
            bg-white-one
            rounded
            pb-4
            pt-4
            pl-16
            pr-16
            mb-3
          ">
          <div class="bg-gray-one" *ngIf="this.empSelections[x].selected.length > 0">
            <div class="flex flex-row justify-between p-4 mt-3">
              <span>{{ this.empSelections[x].selected.length }} {{("Employee" | labelReplacement)| async}}s
                Selected</span>
              <div>
                <app-button text="Remove {{('Employee' | labelReplacement)| async}}" icon="delete" iconPosition="left" size="sm" color="secondary"
                  (click)="deleteMultipleEmployees(deleteEmp, x)"></app-button>
              </div>
            </div>
          </div>
          <div class="flex flex-row justify-between mt-4 p-3" style="background-color: #5c9b3114">
            <div>
              <app-icon icon="calendar_month" class="text-qtd"></app-icon>
              <span class="font-bold" *ngIf="source?.isStartAndEndTimeEmpty === true">{{ source?.startDateTime | date: "MM-dd-yy" }} to
                {{ source?.endDateTime | date: "MM-dd-yy" }}</span>
              <span class="font-bold" *ngIf="source?.isStartAndEndTimeEmpty === false">{{ source?.startDateTime | date: "MM-dd-yy, h:mm a" }} to
                {{ source?.endDateTime | date: "MM-dd-yy, h:mm a" }}</span>
            </div>
            <div>
              <button mat-icon-button [matMenuTriggerFor]="enrollmentsMenu">
                <app-icon icon="more_horiz"></app-icon>
              </button>
              <mat-menu #enrollmentsMenu="matMenu">
                <label mat-menu-item (click)="
                    openFlyInPanel(changeTrainingSettings);
                    selectedClassId = source;
                  ">Edit Class</label>
                <label  (click)="deleteClass(deletecls,source.id)" mat-menu-item>Remove Class</label>
              </mat-menu>
            </div>
          </div>
          <table [dataSource]="dataSourceEmployees[x]" mat-table style="width: 100%" class="mt-3">
            <ng-container matColumnDef="select">
              <th mat-header-cell *matHeaderCellDef mat-sort-header style="width: 10%"></th>
              <td mat-cell *matCellDef="let element">
                <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selectrow(element, x) : null"
                  [checked]="selection.isSelected(element)">
                </mat-checkbox>
              </td>
            </ng-container>
            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Name</th>
              <td mat-cell *matCellDef="let element">
                <div class="flex flex-row" style="align-items: center"
                  *ngIf="element.employeeImage !== undefined; else elseScreen">
                  <img class="rounded-full mr-2 mt-1" style="width: 2rem; height: 2rem"
                    [src]="element.employee.person.image" onerror="this.src='assets/img/ImageNotFound.jpg'" />
                  {{ element.employee.person.username }}
                </div>
                <ng-template #elseScreen>
                  <div class="flex flex-row" style="align-items: center">
                    <img class="rounded-full mr-2 mt-1" style="width: 2rem; height: 2rem"
                      [src]="element?.employee.person?.image" onerror="this.src='assets/img/ImageNotFound.jpg'" />
                    {{ element?.employee?.person?.firstName }}
                    {{ element?.employee?.person?.lastName }}
                  </div>
                </ng-template>
              </td>
            </ng-container>
            <ng-container matColumnDef="position">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>
                {{("Position" | labelReplacement)| async}}
              </th>
              <td mat-cell *matCellDef="let element">
                {{
                element.employee.employeePositions.length > 0
                ? element.employee.employeePositions[0].position
                .positionTitle
                : "N/A"
                }}
              </td>
            </ng-container>
            <ng-container matColumnDef="organization">
              <th mat-header-cell *matHeaderCellDef>Organization</th>

              <td mat-cell *matCellDef="let element">
                {{
                element.employee.employeeOrganizations.length > 0
                ? element.employee.employeeOrganizations[0].organization.name
                : "N/A"
                }}
              </td>
            </ng-container>
            <ng-container matColumnDef="action">
              <th mat-header-cell *matHeaderCellDef></th>

              <td mat-cell *matCellDef="let row; let i = index">
                <app-icon icon="delete" size="sm" color="secondary" class="text-qtd" (click)="
                    deleteTraining(removeEmployee, i, row.employee.id, x)
                  ">
                </app-icon>
              </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumnsEmployees"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumnsEmployees"></tr>

            <tr class="mat-row text-center" *matNoDataRow>
              <td [attr.colspan]="displayedColumnsEmployees.length" class="mat-cell text-center mt-2">
                No Students Enrolled
              </td>
            </tr>
          </table>
        </div>
      </div>
    </div>
  </mat-step>
  <mat-step label="Review & Add">
    <div class="flex w-full pt-4" style="justify-content: center">
      <div style="width: 70%" class="flex flex-col">
        <div class="
            border-gray-one border-0.5
            bg-white-one
            rounded
            pb-4
            pt-4
            pl-16
            pr-16
          ">
          <div class="flex flex-row justify-between">
            <div class="flex flex-row justify-between mb-4">
              <p>
                You are adding a new training event for :
                <span class="text-lg text-qtd font-bold"> {{ ilaName }}</span>
              </p>
            </div>

            <p class="text-gray-400 ml-2">
              <!-- <app-button
                      (clicked)="seq_and_schedule.emit()"
                      ButtonType="text"
                      text="Edit"
                      icon="edit"
                    ></app-button> -->
            </p>
          </div>
          <table>
            <tr class="border-b-0.8 border-gray-one">
              <td>
                <span class="text-gray-400" *ngIf="isTimeEmpty === false">Date/Time</span>
                <span class="text-gray-400" *ngIf="isTimeEmpty === true">Date</span>
              </td>
              <td>
                <span class="text-lg font-bold" *ngIf="isTimeEmpty === false">
                  {{
                    datePipe.transform(StartDateTime,"yyyy-MM-dd hh:mm a")
                  }}
                to
                {{
                  datePipe.transform(endDateTime,"yyyy-MM-dd hh:mm a")
                }}
                </span>

                <span class="text-lg font-bold" *ngIf="isTimeEmpty === true">
                  {{
                    datePipe.transform(StartDateTime,"yyyy-MM-dd")
                  }}
                to
                {{
                  datePipe.transform(endDateTime,"yyyy-MM-dd")
                }}
                </span>
              </td>
            </tr>
            <tr class="border-b-0.8 border-gray-one">
              <td>
                <span class="text-gray-400"> Total students enrolled: </span>
              </td>
              <td>
                <span class="text-lg font-bold">{{reviewData?.enrolledStudents}} students out of a class size of
                  {{ reviewData?.totalStudents}}.
                </span>
              </td>
            </tr>

            <tr class="border-b-0.8 border-gray-one">
              <td>
                <span class="text-gray-400">Selections have been made for:</span>
              </td>
              <td>
                <span class="text-lg font-bold">{{reviewData?.selectionsMadeFor}}
                </span>
              </td>
            </tr>
            <tr class="border-b-0.8 border-gray-one">
              <td>
                <span class="text-gray-400">The following notifications will be sent using your
                  Notification Settings:</span>
              </td>
              <td> 
                <span class="text-lg font-bold">{{reviewData?.notificationsEnabledFor}}</span>
              </td>
            </tr>
          </table>
        </div>
      </div>
    </div>
  </mat-step>
</mat-stepper>
<!-- <pre>{{trainingForm.value | json}}</pre> -->
<ng-template #recurrenceFlyIn>
  <app-fly-panel-add-recurrence-event [dateInformation]="dateInformation"
    (createdRecurrenceEvent)="recurrenceCreated($event)"
    (recurrenceInformationEvent)="receivedRecurrenceInformation($event)"
    [minEndDate] = "this.trainingForm.get('endDate').value"
    (success)="EnrollStudentSelected()"></app-fly-panel-add-recurrence-event>
</ng-template>
<ng-template #changeTrainingSettings>
  <app-fly-panel-change-enrollment-settings [scheduleId]="selectedClassId" [getEditInformation]="selectedClassId">
  </app-fly-panel-change-enrollment-settings>
</ng-template>

<ng-template #removeEmployee>
  <app-qtd-dialogue header="Remove {{('Employee' | labelReplacement)| async}}" [description]="deleteDescription" cancelText="No" confirmText="Yes"
    [showEffectiveDateAndReason]="false" (canceled)="dialog.closeAll()" (confirmed)="Delete($event)">
  </app-qtd-dialogue>
</ng-template>

<ng-template #deleteEmp>
  <app-remove-employees-dialogue [filteredList]="empSelections[selectedIDX].selected" header="Delete {{('Employee' | labelReplacement)| async}}"
    [deleteSelectedEmp]="unlinkIds" (confirmed)="DeleteMultiple()" [deleteDescription]="deleteDescription"
    confirmText="Yes" (canceled)="dialog.closeAll()">
  </app-remove-employees-dialogue>
</ng-template>
<ng-template #waitlist>
  <app-flypanel-employees-waitlist> </app-flypanel-employees-waitlist>
</ng-template>
<ng-template #linkEvaluators>
  <app-flypanel-link-task-qualification-evaluators (tqSelected)="tqSelected($event)" [IlaId]="ilaId"  [qualData]="qualInfo" >
  </app-flypanel-link-task-qualification-evaluators>
</ng-template>

<ng-template #linkClasses>
  <app-fly-panel-classes-list [appClassesList]="classes_List" (idSelected)="SelectedClassIds($event)">

  </app-fly-panel-classes-list>
</ng-template>

<ng-template #linkStudentEvaluators>
  <app-fly-panel-add-tq-evaluater (idSelected)="tqStudentEvalSelected($event)"></app-fly-panel-add-tq-evaluater>
</ng-template>
<ng-template #enrollEmployee>
  <app-fly-panel-enroll-employees [classData]="classData" (idSelected)="EnrollStudentSelected()">
  </app-fly-panel-enroll-employees>
</ng-template>

<ng-template #addEmpRecurrDialog>
  <app-add-emp-recurr-dialog (selected)="dataSelcted($event, enrollEmployee)" (closed)="dialog.closeAll()"
    [classId]="trainingId"></app-add-emp-recurr-dialog>
</ng-template>


<ng-template #deletecls>
  <app-qtd-dialogue header="Delete Class" [description]="deleteDescription" cancelText="No"
    confirmText="Yes" [showEffectiveDateAndReason]="false" (canceled)="dialog.closeAll()" (confirmed)="deleteTR($event)">
  </app-qtd-dialogue>
</ng-template>

<ng-template #deleteSignleRecurrTraining>
  <app-qtd-dialogue header="Delete Recurring Training" [description]="deleteDescription" cancelText="No" confirmText="Yes"
    [showEffectiveDateAndReason]="false" (canceled)="dialog.closeAll()" (confirmed)="deleterecurrTraining($event)">
  </app-qtd-dialogue>
</ng-template>

