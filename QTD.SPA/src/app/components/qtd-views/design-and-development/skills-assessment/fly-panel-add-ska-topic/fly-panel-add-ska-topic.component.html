<div class="flex flex-col">

    <div class="flex flex-row justify-between items-center px-3 mt-2">
        <p class="text-xl font-bold text-gray-900">Add New Topic</p>
        <app-button (clicked)="closed.emit('fp-add-topic-closed')" ButtonType='icon' icon="close">
        </app-button>
    </div>

    <form class="flex flex-col" [formGroup]="topicForm">
        <div class="mt-3">
            <app-label [for]="'category'" text="Category *"></app-label>
            <mat-select formControlName="category" placeholder="Select Category"
                (selectionChange)="getCategories($event.value)"
                class="appearance-none rounded border w-full px-4 py-2.5 mt-2">
                <mat-option *ngFor="let d of categories" [value]="d.id">
                    {{d.description}}
                </mat-option>
            </mat-select>
            <app-input-error *ngIf="topicForm.get('category')?.invalid" text="Category Is Required">
            </app-input-error>
        </div>

        <div class="mt-3">
            <app-label [for]="'subcategory'" text="Sub Category *"></app-label>
            <mat-select formControlName="subcategory" placeholder="Select Sub Category"
                (selectionChange)="getSubCategories($event.value)"
                class="appearance-none rounded border w-full px-4 py-2.5 mt-2">
                <mat-option *ngFor="let d of subcategories" [value]="d.id">
                    {{d.description}}
                </mat-option>
            </mat-select>
            <app-input-error *ngIf="topicForm.get('subcategory')?.invalid" text="Sub Category Is Required">
            </app-input-error>
        </div>

        <div class="mt-3">
            <app-label [for]="'number'" text="Topic Number"></app-label>
            <app-textbox formControlName="number" [disabled]="true" 
                [(ngModel)]="TopicNumber"></app-textbox>
            <app-input-error *ngIf="topicForm.get('number')?.invalid" text="Number Is Required">
            </app-input-error>
        </div>
        <div class="mt-3">
            <app-label [for]="'title'" text="Topic Title"></app-label>
            <app-textbox formControlName="title" placeholder="Title"></app-textbox>
            <app-input-error *ngIf="topicForm.get('title')?.invalid" text="Title Is Required">
            </app-input-error>
        </div>
        <div class="mt-3">
            <app-label [for]="'desc'" text="Topic Description"></app-label>
            <app-textarea formControlName="desc" placeholder="Please enter description here">
            </app-textarea>
            <app-input-error *ngIf="topicForm.get('desc')?.invalid" text="Description is Required">
            </app-input-error>
        </div>
        <div class="mt-3">
            <app-label [for]="'effectiveDate'" text="Effective Date"></app-label>
            <app-date formControlName="effectiveDate"></app-date>
        </div>
        <div class="mt-3">
            <app-label [for]="'reason'" text="Reason for Revision"></app-label>
            <app-textarea formControlName="reason" placeholder="Please enter Reasons for Revision here">
            </app-textarea>
        </div>
        <div class="flex flex-row flex-grow justify-between pt-12">
            <mat-checkbox formControlName="AddAnother" name="AddAnother">Add another Topic</mat-checkbox>
            <app-button [disabled]="topicForm.invalid" (clicked)="saveTopic()" text="Save"
                size="sm"></app-button>
        </div>
    </form>
</div>