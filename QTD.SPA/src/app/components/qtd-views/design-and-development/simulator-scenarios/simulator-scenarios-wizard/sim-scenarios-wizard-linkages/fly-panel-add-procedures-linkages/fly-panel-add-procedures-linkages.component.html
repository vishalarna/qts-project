<ng-container   *ngIf="linkProcs">
    <div class="flex flex-col" [ngClass]="{ 'px-12 py-12':linkProcs}">
      <ng-container *ngIf="linkProcs">
        <div class="flex flex-row justify-between">
          <h2>Link {{("Procedure" | labelReplacement)| async}}s to Scenarios</h2>
          <app-button ButtonType="icon" icon="close" (click)="flyPanelSrvc.close()" ></app-button>
        </div>
        <div class="flex flex-row items-center border-b-0.8 border-gray-one">
          <div class="flex flex-grow">
            <app-icon icon="search"></app-icon>
            <input class="text-sm flex-grow focus:outline-none" placeholder="Search" type="text"
            [value] = "filterProcString" (input)="searchFilter($event)">
            <app-icon icon="close" class="cursor-pointer" *ngIf="filterProcString" (click)="clearSearchString()"></app-icon>
          </div>
        </div>

        <div class="flex flex-row mt-3 items-center text-gray-four justify-between text-xs btn-group">
          <div>
            <span> Showing:
              <label mat-button  class="mb-0">
                <p *ngIf="showActive" class="font-bold">
                  Active
                </p>
              </label>
            </span>
          </div>
        </div>
  
        <div class="flex flex-col flex-wrap bg-gray-one mb-3 mt-3  px-3 py-3 rounded" *ngIf="linkedIds.length > 0">
          <div class="flex flex-row w-full justify-between mb-3">
            <p class="text-xs text-gray-four pt-2">{{linkedIds.length}} {{("Procedure" | labelReplacement)| async}}s selected</p>
            <app-button  class="mb-2" type="button"
              color="secondary" size="sm" text="Link {{ 'Procedure' | labelReplacement | async }}s" (click)="linkProcToScenariosAsync()">
            </app-button>
          </div>
          <hr>
          <p class="text-xs text-gray-four mt-3">Selecting a Issuing Authority will select all {{("Procedure" | labelReplacement)| async}}s linked
            to
            the given Issuing Authority</p>
        </div>
  
        <app-spinner *ngIf="dataSource.data === undefined"></app-spinner>
  
        <ng-container *ngIf="dataSource.data !== undefined">
          <div *ngIf="dataSource.data.length < 1" class="flex flex-col">
            <span>No Data Found</span>
          </div>
          <div class="flex flex-col ">
            <mat-tree [dataSource]="dataSource" [treeControl]="treeControl" class="qtd-tree">
              <!-- This is the tree node template for leaf nodes -->
              <!-- There is inline padding applied to this node using styles.
                      This padding value depends on the mat-icon-button width. -->
              <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle matTreeNodePadding>
                <ng-container *ngIf="!linkedProceduresIds.includes(node.id)">
                  <mat-checkbox (change)="itemToggle($event.checked,node)" [checked]="node.selected">
                    {{node.number}} - {{node.description}}</mat-checkbox> 
                </ng-container>
                <ng-container *ngIf="linkedProceduresIds.includes(node.id)">
                  <app-icon style="color: rgb(92, 155, 49);" icon="link"></app-icon>&nbsp;<span
                    style="color: rgb(92, 155, 49);">{{node.number}} - {{node.description}}</span>
                </ng-container>
              </mat-tree-node>
  
              <!-- This is the tree node template for expandable nodes -->
              <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">
                <div class="mat-tree-node">
                  <button style="outline:none;" mat-icon-button matTreeNodeToggle [attr.aria-label]="'Toggle ' + node.description">
                    <app-icon [icon]="treeControl.isExpanded(node) ? 'expand_more' : 'expand_less'">
                    </app-icon>
                  </button>
  
                  <mat-checkbox [checked]="node.selected" [indeterminate]="node.indeterminate && !node.selected"
                    (change)="itemToggle($event.checked,node)">{{node.description}}</mat-checkbox>
                </div>
  
                <div [class.qtd-tree-invisible]="!treeControl.isExpanded(node)" role="group">
                  <ng-container matTreeNodeOutlet></ng-container>
                </div>
              </mat-nested-tree-node>
            </mat-tree>
  
          </div>
        </ng-container>
      </ng-container>
    </div>
  </ng-container>