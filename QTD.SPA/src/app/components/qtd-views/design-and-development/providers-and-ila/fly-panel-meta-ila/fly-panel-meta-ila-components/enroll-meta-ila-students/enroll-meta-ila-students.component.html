<div class="flex w-full" >
  <div class="flex flex-col w-full">
    <div class="flex flex-row  justify-between mb-3">
      <span class="text-lg font-bold">Enrollments</span>
      <app-button text="Add {{('Employee' | labelReplacement)| async}}" (clicked)="openAddEmpFlyPanel.emit()" icon="add" iconPosition="left" size="sm"
        ></app-button>
    </div>
    <div  class="border-gray-one border-0.5 bg-white-one rounded p-2 mb-3 ">
      <div class="bg-gray-one" *ngIf="selection.selected.length > 0">
        <div class="flex flex-row justify-between p-4 mt-3">
          <span>{{ selection.selected.length }} {{("Employee" | labelReplacement)| async}}s
            Selected</span>
          <div>
            <app-button text="Remove {{('Employee' | labelReplacement)| async}}" (click)="selection.selected.length==1?removeEMPDialog(deleteDialog):removeMultipleEMPDialogue(deleteEmp)"  icon="delete" iconPosition="left" size="sm" color="secondary">
            </app-button>
          </div>
        </div>
      </div>
      <div class="employees-list">
        <table [dataSource]="enrolledEmployees" mat-table style="width: 100%" class="mt-3">
          <ng-container matColumnDef="select">
            <th mat-header-cell *matHeaderCellDef mat-sort-header style="width: 10%"></th>
            <td mat-cell *matCellDef="let element">
              <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(element) : null"
                [checked]="selection.isSelected(element)"></mat-checkbox>
            </td>
          </ng-container>
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Name</th>
            <td mat-cell *matCellDef="let element">
              <div class="flex flex-row" style="align-items: center">
                <img style="border-radius: 50%; width: 50px; height: 50px" class="img-fluid mr-2 mt-2 ml-2 mb-2"
                [src]="element.image" onerror="this.src='assets/img/ImageNotFound.jpg'" />
                {{ element.fullName}}
              </div>
            </td>
          </ng-container>
          <ng-container matColumnDef="position">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              {{("Position" | labelReplacement)| async}}
            </th>
            <td mat-cell *matCellDef="let element">
              <span>{{element.positions}}</span>
            </td>
          </ng-container>
          <ng-container matColumnDef="organization">
            <th mat-header-cell *matHeaderCellDef>Organization</th>

            <td mat-cell *matCellDef="let element">
              <span>{{element.organizations}}</span>
            </td>
          </ng-container>
          <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef></th>
            <td mat-cell *matCellDef="let element; let i = index">
            </td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumnsEmployees"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumnsEmployees"></tr>

          <tr class="mat-row text-center" *matNoDataRow>
            <td [attr.colspan]="displayedColumnsEmployees.length" class="mat-cell text-center mt-2">
              No Students Enrolled
            </td>
          </tr>
        </table>

      </div>

    </div>
  </div>
</div>

<ng-template #deleteDialog>
  <app-qtd-dialogue [header]="'Remove Employee'" [description]="description" [confirmText]="'Yes'" [cancelText]="'No'"
      (canceled)="dialog.closeAll()" [showEffectiveDateAndReason]="false"
      (confirmed)="removeEMP()"></app-qtd-dialogue>
</ng-template>

<ng-template #deleteEmp>
  <app-remove-employees-dialogue [filteredList]="selection.selected" [isEmployeeFullName] = "true" header="Delete {{('Employee' | labelReplacement)| async}}"
     (confirmed)="removeEMP()" [deleteDescription]="description"
    confirmText="Yes" (canceled)="dialog.closeAll()">
  </app-remove-employees-dialogue>
</ng-template>
