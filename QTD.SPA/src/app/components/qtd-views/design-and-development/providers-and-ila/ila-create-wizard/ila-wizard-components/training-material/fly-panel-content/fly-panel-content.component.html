<ng-container *ngIf="!objpanel">
  <!-- header starts here -->
  <div class="flex flex-row justify-between items-center px-12 mt-12">
    <h1 class="text-xl font-medium text-gray-900">Segment Content</h1>
    <app-button (click)="flyPanelSrvc.close()" ButtonType='icon' icon="close"></app-button>
  </div>
  <!-- header ends here -->


  <div class="flex flex-row justify-between items-center px-12">
    <p class="text-lg font-semibold">{{myData.title}}</p>
  </div>

  <div class="flex flex-row px-12">
    <div class="flex flex-col mr-4">
      <span class="mt-3 font-medium text-sm">Segement Title</span>
      <app-textbox  [(ngModel)]="myData.title" placeholder="Segment Title" [disabled]="mode === 'view'">
      </app-textbox>
    </div>
    <div class="flex flex-col">
      <span class="mt-3 font-medium text-sm">Segment Duration</span>
      <div class="flex flex-row">
        <app-textbox   [(ngModel)]="myData.duration"
          placeholder="Enter Duration" [disabled]="mode === 'view'"></app-textbox>
      </div>
      <p class="text-sm text-gray-four">min</p>

    </div>

  </div>

 <!--  <div class="flex flex-row items-center px-12">
    <p class="text-sm text-gray-four">Segment Title </p><app-textbox  [(ngModel)]="myData.title"></app-textbox>
  </div>
  <div class="flex flex-row items-center px-12">
    <p class="text-sm text-gray-four">
      <app-icon icon="schedule"></app-icon>Duration
    </p> <app-textbox  [(ngModel)]="myData.duration"></app-textbox><p class="text-sm text-gray-four">min</p>
  </div> -->
  <div class="py-6 px-12 space-y-6  shadow-xs  bg-white-one rounded mb-8">
    <div class="flex flex-row items-center">
      <p class="flex-grow font-normal text-sm">Segment/Lesson Content</p>

    </div>
    <ckeditor [editor]="Editor" (change)="isEdited($event)" (ready)="onReady($event)" [data]="myData.content"
      [(ngModel)]="contentData" [disabled]="mode === 'view'">
    </ckeditor>
    <!-- <app-input-error *ngIf="!edited" text="Edit The content to enable saving"></app-input-error> -->
  </div>

  <div class="flex flex-col px-12">
    <span *ngIf="isNercProvider" class="mt-3 font-medium text-sm">NERC Only - Segment Includes the
      following</span>
    <ul *ngIf="isNercProvider" class="mt-4">
      <li>
        <mat-checkbox [checked]="myData.isPartialCredit"  (change)="checkPartialCredit($event)" [disabled]="mode === 'view'">Is Partial Credit</mat-checkbox>
      </li>
      <li>
        <mat-checkbox [(ngModel)]="myData.isNercStandard" [disabled]="mode === 'view'">Standard related hours</mat-checkbox>
      </li>
      <li>
        <mat-checkbox [(ngModel)]="myData.isNercOperatingTopics" [disabled]="mode === 'view'">Operating Topics/CEHs</mat-checkbox>
      </li>
      <li>
        <mat-checkbox [(ngModel)]="myData.isNercSimulation" [disabled]="mode === 'view'">Simulation Hours</mat-checkbox>
      </li>
    </ul>
  </div>
  <div class=" px-12 shadow-xs bg-white-one rounded mb-8">

    <div>
      <div class="flex flex-row mb-8">
        <app-button variant="text" text="Link Segment Objectives" iconPosition="left" icon="add"
          (clicked)="linkObjectives()" [disabled]="mode === 'view'"></app-button>
      </div>

      <mat-table [dataSource]="DataSource" matSort cdkDropList class="table-bordered"
        [cdkDropListData]="DataSource" (cdkDropListDropped)="dropTable($event)" [cdkDropListDisabled]="mode === 'view'">
        <ng-container matColumnDef="drag">
          <mat-header-cell *matHeaderCellDef>
          </mat-header-cell>
          <mat-cell *matCellDef="let row">
            <app-icon cdkDragHandle [matTooltip]="mode !== 'view' ? 'Drag to reorder the row' : ''"
              style="pointer-events:all;color: darkgrey!important;cursor:move" icon="drag_indicator">
            </app-icon>
          </mat-cell>
        </ng-container>
        <!-- <ng-container matColumnDef="id">
          <mat-header-cell *matHeaderCellDef>
            <mat-checkbox>
            </mat-checkbox>
          </mat-header-cell>
          <mat-cell *matCellDef="let row">
            <mat-checkbox (change)="stausChanged(row,i,$event)">
            </mat-checkbox>
          </mat-cell>
        </ng-container> -->
        <ng-container matColumnDef="number">
          <mat-header-cell *matHeaderCellDef mat-sort-header="number"> #
          </mat-header-cell>
          <mat-cell *matCellDef="let row" [ngStyle]="{'color':row.type=='Custom'?'orange':''}"> {{row.number}} 
          </mat-cell>
        </ng-container>
        <ng-container matColumnDef="type">
          <mat-header-cell *matHeaderCellDef mat-sort-header="type"> Type
          </mat-header-cell>
          <mat-cell *matCellDef="let row"> {{row.type}} </mat-cell>
        </ng-container>
        <ng-container matColumnDef="description">
          <mat-header-cell *matHeaderCellDef mat-sort-header="description"> Description
          </mat-header-cell>
          <mat-cell *matCellDef="let row" [matTooltip]="row.description"
            [ngStyle]="{'color':row.type=='Custom'?'orange':''}">
            {{row.description}} </mat-cell>
        </ng-container>
        <ng-container matColumnDef="unlink">
          <mat-header-cell *matHeaderCellDef>
            <span *ngIf="saved">Unlink</span>
            <span *ngIf="!saved">Remove</span>
          </mat-header-cell>
          <mat-cell *matCellDef="let row">
            <app-icon (click)="mode !== 'view' && unlinkEO(row)" style="color: grey;cursor: pointer;" icon="link_off"></app-icon>
          </mat-cell>
        </ng-container>



        <mat-header-row *matHeaderRowDef="displayColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayColumns;" cdkDrag
          [cdkDragData]="row"></mat-row>

        <!-- Row shown when there is no matching data.-->
        <tr class="mat-row flex text-center " *matNoDataRow>
          <td class="mat-cell w-full m-2">No data to display</td>
        </tr>

      </mat-table>
      <mat-paginator [pageSizeOptions]="[20, 40, 60]" showFirstLastButtons aria-label="Select page of periodic elements">
      </mat-paginator>

    </div>
  </div>


  <div class="flex flex-row justify-end px-12">
    <app-button [spinner]="showLoader" (clicked)="saveContent()" [disabled]="showLoader" type="button"
      size="sm" color="secondary" text="Save" [disabled]="mode === 'view'">
    </app-button>
  </div>

</ng-container>
<!-- <ng-container #objectives *ngIf="objpanel">
    <app-fly-panel-objectives [isCustomEO]="isCustomEO" (closed)="objpanel=false"></app-fly-panel-objectives>
</ng-container> -->

<ng-container *ngIf="objpanel">
  <app-fly-panel-link-scenario-objective [linkedEOIds]="linkedEoIds" [linkedTaskIds]="linkedTaskIds" [linkedCOIds]="linkedCOIds" (sendId)="captureLinkData($event)"  [isCustomEO]="isCustomEO"
    (closed)="objpanel=false" [segmentTitle]="myData.title">
  </app-fly-panel-link-scenario-objective>
</ng-container>
