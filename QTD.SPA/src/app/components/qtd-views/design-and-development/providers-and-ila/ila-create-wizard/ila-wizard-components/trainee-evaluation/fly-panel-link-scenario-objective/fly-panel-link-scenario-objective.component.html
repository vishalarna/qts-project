<div class="flex flex-col px-12 py-12">
  <ng-container>
    <div class="flex flex-row justify-between px-2 mb-3">
      <h2>Add Learning Objective : {{segmentTitle}}</h2>
      <app-button type="button" ButtonType="icon" icon="close" (clicked)="OnClose($event)"></app-button>
    </div>
    <div class="search-set-container" *ngIf="!spinner">
      <div class="flex flex-grow keyword-input">
        <svg class="flex-none w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
        </svg>
        <input class="text-sm flex-grow focus:outline-none" [value]="searchString" placeholder=" Search Objectives" type="text" (input)="searchObjectives($event)" />
      </div>
    </div>
  </ng-container>
  <div class="spinner-container" *ngIf="spinner">
    <app-spinner></app-spinner>
  </div>
  <div class="rounded-t-md py-4 space-x-2" *ngIf="selection.selected.length > 0">
    <mat-toolbar class="h-28 app-toolbar-sticky w-full">
      <div class="flex flex-row items-center space-x-4 w-full justify-between">
        <span class="text-sm">
          {{ selection.selected.length }} Objective{{ selection.selected.length > 1 ? 's' : '' }} selected
        </span>
        <div class="flex flex-row space-x-4 m-3 text-sm float-right">
          <app-button color="secondary" text="Add To Segment " (clicked)="addToSegment()" size="sm" icon="link"
            iconPosition="left">
          </app-button>
        </div>
      </div>
    </mat-toolbar>
  </div>
  <div class="flex flex-row my-4" *ngIf="!spinner">
    <mat-checkbox (change)="$event ? masterToggle() : null" [checked]="selection.hasValue() && isAllSelected()"
      [indeterminate]="selection.hasValue() && !isAllSelected()" class="mr-3"></mat-checkbox>
    <span class="font-bold text-gray-500">All Objectives</span>
  </div>
  <div class="filter-list-data" *ngIf="!spinner">
    <mat-table class="objective-table" [dataSource]="objectiveDataSource" matSort (matSortChange)="sortData($event)">
    <ng-container matColumnDef="index">
      <mat-header-cell *matHeaderCellDef class="check-box-column">
        <mat-checkbox [disabled]="true"></mat-checkbox>
      </mat-header-cell>
      <mat-cell *matCellDef="let row" class="check-box-column">
        <mat-checkbox *ngIf="!learningObjectiveIds.includes(row.id) && !row.linked" (click)="$event.stopPropagation()"
          (change)="$event ? selection.toggle(row) : null" [checked]="selection.isSelected(row) || row.checked"></mat-checkbox>
          <app-icon *ngIf="row.linked" class="mr-2" style="color: rgb(92, 155, 49);" icon="link"></app-icon>
      </mat-cell>
    </ng-container>
    <ng-container matColumnDef="type">
      <mat-header-cell *matHeaderCellDef mat-sort-header class="objective-type-column"> Type
      </mat-header-cell>
      <mat-cell *matCellDef="let row" class="objective-type-column" [ngClass]="{'linked-row': row.linked || row.linkedToOther}">{{row.type}}</mat-cell>
    </ng-container>
    <ng-container matColumnDef="number">
      <mat-header-cell *matHeaderCellDef mat-sort-header class="objective-number-column"> #
      </mat-header-cell>
      <mat-cell *matCellDef="let row" class="objective-number-column" [ngClass]="{'linked-row': row.linked || row.linkedToOther}">{{row.number}}</mat-cell>
    </ng-container>
    <ng-container matColumnDef="description">
      <mat-header-cell *matHeaderCellDef mat-sort-header class="objective-description-column"> Description
      </mat-header-cell>
      <mat-cell *matCellDef="let row" class="objective-description-column" [ngClass]="{'linked-row': row.linked || row.linkedToOther}">{{row.description}}</mat-cell>
    </ng-container>
    <mat-header-row *matHeaderRowDef="displayedLearningObjectiveColumns"></mat-header-row>
    <mat-row *matRowDef="let row; columns: displayedLearningObjectiveColumns"></mat-row>
    <!-- Row shown when there is no matching data.-->
    <tr class="mat-row flex text-center" *matNoDataRow>
      <td class="mat-cell w-full">No Data</td>
    </tr>
    </mat-table>
  </div>
</div>