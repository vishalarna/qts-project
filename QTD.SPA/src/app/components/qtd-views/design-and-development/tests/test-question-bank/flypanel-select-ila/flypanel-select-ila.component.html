<!--Heading starts-->
<div class="flex flex-col px-12 py-12">
  <ng-container >
      <div class="flex flex-row justify-between" style="align-items: center;">
          <p class="text-lg font-bold mb-0 pb-0">Select an {{("ILA" | labelReplacement)| async}}</p>
          <app-button class="mb-2" ButtonType="icon" icon="close" (clicked)="closed.emit('fp-eo-ila-link-closed')"></app-button>

      </div>
      <div class="flex flex-row items-center mt-3 justify-between">
          <div class="flex border-b-0.8 border-gray-one pr-4" style="width: 70%;">
              <app-icon icon="search"></app-icon>
              <input class="text-sm flex-grow focus:outline-none" placeholder="Search" type="text"
                  (input)="filterData(dataSource.data,$event)" [(ngModel)]="filterIlaString">
          </div>
          <div class="flex flex-row mb-3 ml-2">
              <app-button [customClasses]="'pl-2 pr-2'" type="button" color="secondary" size="sm" leftIcon="filter_alt" rightIcon="expand_more"
                  text="Filter By" [matMenuTriggerFor]="filterMenu"></app-button>
              <mat-menu #filterMenu="matMenu" backdropClass="qtd__menu">
                  <label [disabled]="isProvider" mat-menu-item (click)="filterBy='Provider';isProvider=true;getProviderData()">Provider</label>
                  <label [disabled]="!isProvider" mat-menu-item (click)="filterBy='Topic';isProvider=false;getTopicData()">Topic</label>
              </mat-menu>
          </div>

      </div>

      <!--Heading ends-->

      <div class="flex flex-row mt-3 items-center text-gray-four justify-between text-xs btn-group">

          <div class="cursor-pointer">
              <span> Showing:
                  <label mat-button [matMenuTriggerFor]="menu" class="mb-0">
                      <p *ngIf="showActive">
                          Active {{("ILA" | labelReplacement)| async}}
                      </p>
                      <p *ngIf="!showActive">
                          Inactive {{("ILA" | labelReplacement)| async}}
                      </p>

                  </label>
                  <app-icon icon="expand_more" [matMenuTriggerFor]="menu"></app-icon>
              </span>

              <mat-menu #menu="matMenu">
                  <label mat-menu-item *ngIf="!showActive" (click)="filterActive(true)">
                      Active</label>

                  <label mat-menu-item *ngIf="showActive" (click)="filterActive(false)">
                      Inactive</label>
              </mat-menu>
          </div>

      </div>
      <!-- *ngIf="active_Ilas" -->

      <app-spinner *ngIf="isILALoading"></app-spinner>
      <span *ngIf="dataSource.data !== undefined && dataSource.data.length < 1 && !isILALoading">No {{("ILA" | labelReplacement)| async}}s Found</span>
      <ng-container *ngIf="dataSource.data !== undefined && dataSource.data.length > 0 && !isILALoading">
          <div class="flex flex-col ">
              <mat-tree [dataSource]="dataSource" [treeControl]="treeControl" class="qtd-tree">
                  <!-- This is the tree node template for leaf nodes -->
                  <!-- There is inline padding applied to this node using styles.
                This padding value depends on the mat-icon-button width. -->
                  <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle matTreeNodePadding>
                    <ng-container style="cursor:pointer;" *ngIf="node.checkbox">
                      <span class="cursor-pointer" (click)="idSelected.emit(node)">
                      {{node.description}}</span>
                    </ng-container>
                    <ng-container *ngIf="!node.checkbox">
                      <app-icon style="color: rgb(92, 155, 49);" icon="link"></app-icon>&nbsp;<span style="color: rgb(92, 155, 49);">{{node.description}}</span>
                    </ng-container>
                    <!-- <ng-container *ngIf="!node.checkbox && filtered(node) && node.HasChild">
                      <span>{{node.description}}</span>
                    </ng-container> -->
                  </mat-tree-node>

                  <!-- This is the tree node template for expandable nodes -->
                  <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">
                      <div class="mat-tree-node">
                          <button mat-icon-button matTreeNodeToggle [attr.aria-label]="'Toggle ' + node.description">
                              <app-icon [icon]="treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'">
                              </app-icon>
                          </button>

                          <span>{{node.description}}</span>
                      </div>

                      <div *ngIf="treeControl.isExpanded(node)" role="group">
                          <ng-container matTreeNodeOutlet></ng-container>
                      </div>
                  </mat-nested-tree-node>
              </mat-tree>

          </div>
      </ng-container>
  </ng-container>
</div>
