<ng-container *ngIf="!isPreview">
    <div class="flex flex-col px-12 py-12">
        
        <ng-container>
            <div class="flex flex-row justify-between">
                <p class="font-bold text-lg m-0 p-0">Randomly select by all EOs</p>
                <app-button ButtonType="icon" icon="close" (clicked)="closed.emit('fp-sh-task-link-closed')"></app-button>

            </div>

            <ng-container *ngIf="isRandomize">
                <section class="flex flex-col bg-white rounded shadow-sm mt-4">
            
                    <div class="flex flex-row flex-wrap bg-gray-one justify-between mb-3 mt-3  px-3 py-3 rounded"
                    >
                    <p class="text-xs text-gray-four pt-2">{{linkIds.length}}  Questions have been added</p>
                    <app-button  [spinner]="isLinkingTestItem" [disabled]="isLinkingTestItem" 
                        size="sm" color="secondary" (clicked)="linkTestItems()" text="Import to Test">
                    </app-button>
                    </div>
                    <app-data-loader *ngIf="isLoading"></app-data-loader>
                    <div [hidden]="isLoading">
                    <table matSort mat-table class="w-full" [dataSource]="dataSource">
                        <!-- <ng-container  matColumnDef="cb">
                        <th mat-header-cell *matHeaderCellDef>
                            <mat-checkbox (change)="$event ? masterToggle() : null" [checked]="selection.hasValue() && isAllSelected()"
                            [indeterminate]="selection.hasValue() && !isAllSelected()"></mat-checkbox>
                        </th>
                        <td mat-cell *matCellDef="let row">
                            <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selectrow(row) : null"
                            [checked]="selection.isSelected(row)"></mat-checkbox>
                        </td>
                        </ng-container> -->
                
                        <!-- <ng-container matColumnDef="number">
                        <th mat-sort-header  mat-header-cell *matHeaderCellDef>
                            ID
                        </th>
                        <td  mat-cell *matCellDef="let row">
                            {{row.number}}
                        </td>
                        </ng-container> -->
                
                        <ng-container matColumnDef="question">
                        <th mat-sort-header mat-header-cell *matHeaderCellDef>
                                Test Question
                        </th>
                        <td style="width: 30%;word-wrap: break-word;" class="pt-3" mat-cell *matCellDef="let row">
                            <p [innerHTML]="row.question"></p>
                        </td>
                        </ng-container>
                        <ng-container matColumnDef="type">
                        <th mat-sort-header mat-header-cell *matHeaderCellDef>
                            Type
                        </th>
                        <td mat-cell *matCellDef="let row">
                            {{row.type}}
                        </td>
                        </ng-container>
                        <ng-container matColumnDef="taxonomy">
                        <th mat-sort-header mat-header-cell *matHeaderCellDef>
                            Taxonomy Level
                        </th>
                        <td mat-cell *matCellDef="let row">
                            {{row.taxonomy}}
                        </td>
                        </ng-container>
                        <ng-container matColumnDef="status">
                            <th mat-sort-header mat-header-cell *matHeaderCellDef>
                                
                            </th>
                            <td mat-cell *matCellDef="let row">
                                <div class="flex w-full">
                                    <app-button  ButtonType="button" variant="text" [icon]="'visibility'" iconPosition="left" text="Preview"
                                    (clicked)="preview()"
                                    (clicked)="selectedRow = row;preview();"></app-button>
                                </div>
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="del">
                            <th mat-sort-header mat-header-cell *matHeaderCellDef>
                                
                            </th>
                            <td mat-cell *matCellDef="let row">
                                <div class="flex w-full cursor-pointer">
                                    <app-icon [icon]="'delete'" (click)="selectedRow=row;deleteRow(row);"
                                         style="color: rgba(92, 155, 49, 1)"></app-icon>
                                </div>
                            </td>
                        </ng-container>
                
                        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                        <tr mat-row *matRowDef="let row; columns : displayedColumns">
                        </tr>
                        <tr class="mat-row" *matNoDataRow>
                        <td class="mat-cell text-center" [attr.colspan]="displayedColumns.length">
                            No data Found.
                        </td>
                        </tr>
                    </table>
                    </div>
                    <mat-paginator [pageSizeOptions]="[10, 15, 20]" showFirstLastButtons aria-label="Select page of periodic elements">
                    </mat-paginator>
                </section>
            </ng-container>

            <div class="mt-8 flex flex-row justify-between">
                <p class="font-medium">No. of questions to add</p>

                <div>
                    <app-button (clicked)="Randomize()" color="secondary" text="Randomize" size="sm" [spinner]="isRandLoading" [disabled]="isRandLoading">
                    </app-button>
                </div>
            </div>

            <div class="mt-1">
                <div class="border w-20 h-10 rounded">
                    <p class="float-left text-base mt-2 align-center ml-2">{{ generate_number}}</p>
                    <div class="float-right flex flex-col mt-0">
                    <button (click)="IncreaseNumber()" class=" focus:outline-none" [disabled]="isDisabled">
                        <app-icon icon=" expand_less"></app-icon>
                    </button>
                    <button (click)="DecreaseNumber()" class="mt--2 focus:outline-none">
                        <app-icon icon="expand_more"></app-icon>
                    </button>
                    </div>
                </div>
            </div>
            <div>
                <div class="flex flex-row justify-between">
                <div class="mt-4">
                    <p class="font-medium">Question Type</p>
                </div>
                
                </div>
    
                <div class="w-78 flex flex-row ">
                <div class="flex flex-row-wrap justify-between">
                    <mat-checkbox class="mr-4" *ngFor="let i of question_type" [(ngModel)]="i.checked"  [value]="i.id" [checked]="i.checked">
                    {{i.description}}</mat-checkbox>
                </div>
                </div>
            </div>

            <div>
                <div class="mt-4">
                <p class="font-medium">Taxonomy Level <app-icon class="mr-2" matTooltipClass="multiline-tooltip"
                    matTooltip="Select the appropriate level of complexity for the test question &#13; Recall - Remember facts and concept &#13; Application - Use information and concepts in different situations &#13; Analyze - Establish relationships between presented information"
                    icon="help"></app-icon>
                </p>
                </div>
    
    
                <div class="w-78 flex flex-row ">
                <div class="flex flex-row-wrap justify-between">
                    <mat-checkbox class="mr-12" *ngFor="let i of taxonomy" [(ngModel)]="i.checked" [value]="i.id" [checked]="i.checked">{{i.description}}
                    </mat-checkbox>
                </div>
                </div>
            </div>
        </ng-container>
    </div>
</ng-container>

<ng-container *ngIf="isPreview">
    <app-flypanel-preview-test-questions  [previousQuestion]="selectedRow" (closed)="close()"></app-flypanel-preview-test-questions>
</ng-container>