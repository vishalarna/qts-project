<div class="flex flex-col px-12 py-12">
    <ng-container>
        <div class="flex flex-row justify-between">
            <p class="font-bold text-lg m-0 p-0">
                Sequence Test Questions
            </p>
            <br/>

        </div>
        <div class="flex flex-row">
            <p>
                <span class="text-gray-400">Select the option below or drag the handles below to arrange the sequence of questions</span>
                <br/>
            </p>
        </div>
        <form [formGroup]="SeqTestFormGroup">
          <div class="flex flex-row">
              <p>
                  <mat-checkbox formControlName="checkRandomTest" (change)="checkRandomTest = $event.checked">Randomize the test Question Sequence</mat-checkbox>
                  <br/><mat-checkbox formControlName="checkRandomDistractor" (change)="checkRandomDistractor = $event.checked">Randomize the test Question Distractor Sequence</mat-checkbox>


              </p>
          </div>
        </form>
        <div class="mt-2" >

            <mat-table class="w-full " matSort [dataSource]="dataSource"
                #table
                (matSortChange)="sortData($event)"
                cdkDropList
                (cdkDropListDropped)="drop($event)"
                cdkDropListData="dataSource"
                [cdkDropListDisabled]="dragDisabled">

                <ng-container matColumnDef="cb">
                    <mat-header-cell *matHeaderCellDef mat-sort-header>

                    </mat-header-cell>
                    <mat-cell *matCellDef="let row">
                        <app-icon [icon]="'drag_indicator'" class="text-gray-400 dragCursor" (mousedown)="dragDisabled = false;"></app-icon>

                        <!-- <mat-icon class="dragCursor" (mousedown)="dragDisabled = false;">reorder</mat-icon> -->
                    </mat-cell>
                </ng-container>


                <ng-container matColumnDef="number">
                    <mat-header-cell *matHeaderCellDef mat-sort-header>
                        ID
                    </mat-header-cell>
                    <mat-cell *matCellDef="let row">
                        {{row.number}}
                    </mat-cell>
                </ng-container>

                <ng-container matColumnDef="question" >
                    <mat-header-cell *matHeaderCellDef mat-sort-header>
                        Question Stem
                    </mat-header-cell>
                    <mat-cell *matCellDef="let row" style="width: 40%; word-break: break-word; overflow-wrap: break-word;" class="pt-3">
                        <p [innerHTML]="row.question"></p>
                    </mat-cell>

                </ng-container>

                <ng-container matColumnDef="type">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Type </mat-header-cell>
                    <mat-cell *matCellDef="let row"> {{row.type}} </mat-cell>
                </ng-container>

                <ng-container matColumnDef="taxonomyLevel">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Taxonomy Level </mat-header-cell>
                    <mat-cell *matCellDef="let row"> {{row.taxonomyLevel}} </mat-cell>
                </ng-container>

                <ng-container matColumnDef="del">
                    <mat-header-cell *matHeaderCellDef mat-sort-header>  </mat-header-cell>
                    <mat-cell *matCellDef="let row">
                        <app-icon [icon]="'delete'" (click)="selectedRow=row;deleteTestItem(row);"
                         style="color: rgba(92, 155, 49, 1)" class="cursor-pointer"></app-icon>
                    </mat-cell>
                </ng-container>

                <ng-container matColumnDef="id">
                    <mat-header-cell *matHeaderCellDef mat-sort-header>  </mat-header-cell>
                    <mat-cell *matCellDef="let row">
                        <app-icon [icon]="'visibility'"  class="cursor-pointer"
                        (click)="selectedRow = row;openPreviewFlyInPanel(previewTestQuestion, row)" style="color: rgba(92, 155, 49, 1)"></app-icon>
                    </mat-cell>
                </ng-container>


                <mat-row *matHeaderRowDef="displayColumns"></mat-row>
                    <mat-row *matRowDef="let row; columns : displayColumns" cdkDrag
                    [cdkDragData]="row"></mat-row>
                    <tr class="mat-row flex text-center " *matNoDataRow>
                        <td class="mat-cell w-full m-2">No Data Found</td>
                    </tr>

            </mat-table>
            <app-data-loader *ngIf="isLoading"></app-data-loader>
            <!-- <table matSort mat-table class="w-full" [dataSource]="dataSource">
                <ng-container  matColumnDef="cb">
                  <th mat-header-cell *matHeaderCellDef>
                    <mat-checkbox (change)="$event ? masterToggle() : null" [checked]="selection.hasValue() && isAllSelected()"
                    [indeterminate]="selection.hasValue() && !isAllSelected()"></mat-checkbox>
                  </th>
                  <td mat-cell *matCellDef="let row">
                    <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selectrow(row) : null"
                    [checked]="selection.isSelected(row)"></mat-checkbox>
                  </td>
                </ng-container>

                <ng-container matColumnDef="number">
                  <th mat-sort-header  mat-header-cell *matHeaderCellDef>
                    ID
                  </th>
                  <td  mat-cell *matCellDef="let row">
                    {{row.number}}
                  </td>
                </ng-container>

                <ng-container matColumnDef="question">
                  <th mat-sort-header mat-header-cell *matHeaderCellDef>
                    Question Stem
                  </th>
                  <td style="width: 30%;word-wrap: break-word;" class="pt-3" mat-cell *matCellDef="let row">
                    <p [innerHTML]="row.question"></p>
                  </td>
                </ng-container>
                <ng-container matColumnDef="type">
                  <th mat-sort-header mat-header-cell *matHeaderCellDef>
                    Type
                  </th>
                  <td mat-cell *matCellDef="let row">
                    {{row.type}}
                  </td>
                </ng-container>
                <ng-container matColumnDef="taxonomy">
                  <th mat-sort-header mat-header-cell *matHeaderCellDef>
                    Taxonomy Level
                  </th>
                  <td mat-cell *matCellDef="let row">
                    {{row.taxonomy}}
                  </td>
                </ng-container>

                <ng-container matColumnDef="del">
                    <th mat-sort-header mat-header-cell *matHeaderCellDef>

                    </th>
                    <td mat-cell *matCellDef="let row">
                      <div class="flex w-full">
                        <app-icon [icon]="'delete'"
                        style="color: rgba(92, 155, 49, 1)"></app-icon>
                      </div>
                    </td>
                </ng-container>

                <ng-container matColumnDef="id">
                  <th mat-sort-header mat-header-cell *matHeaderCellDef>

                  </th>
                  <td mat-cell *matCellDef="let row">
                    <div class="flex w-full">
                        <app-icon [icon]="'visibility'"
                        (click)="selectedRow = row;openPreviewFlyInPanel(previewTestQuestion, row)" style="color: rgba(92, 155, 49, 1)"></app-icon>
                    </div>
                  </td>
                </ng-container>




                <tr class="mat-row" *matNoDataRow>
                  <td class="mat-cell text-center" [attr.colspan]="displayColumns.length">
                    No data Found.
                  </td>
                </tr>
            </table>
            <mat-paginator [pageSizeOptions]="[10, 15, 20]" showFirstLastButtons aria-label="Select page of periodic elements">
            </mat-paginator> -->
        </div>

        <!-- <div class="flex flex-col p-4 pl-5">
            <section class="flex flex-col bg-white rounded shadow-sm mt-4">

                <app-data-loader *ngIf="isLoading"></app-data-loader>
                <div [hidden]="isLoading">
                  <table matSort mat-table class="w-full" [dataSource]="dataSource">
                    <ng-container  matColumnDef="cb">
                      <th mat-header-cell *matHeaderCellDef>
                        <mat-checkbox (change)="$event ? masterToggle() : null" [checked]="selection.hasValue() && isAllSelected()"
                        [indeterminate]="selection.hasValue() && !isAllSelected()"></mat-checkbox>
                      </th>
                      <td mat-cell *matCellDef="let row">
                        <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selectrow(row) : null"
                        [checked]="selection.isSelected(row)"></mat-checkbox>
                      </td>
                    </ng-container>

                    <ng-container matColumnDef="number">
                      <th mat-sort-header  mat-header-cell *matHeaderCellDef>
                        ID
                      </th>
                      <td  mat-cell *matCellDef="let row">
                        {{row.number}}
                      </td>
                    </ng-container>

                    <ng-container matColumnDef="question">
                      <th mat-sort-header mat-header-cell *matHeaderCellDef>
                        Question Stem
                      </th>
                      <td style="width: 30%;word-wrap: break-word;" class="pt-3" mat-cell *matCellDef="let row">
                        <p [innerHTML]="row.question"></p>
                      </td>
                    </ng-container>
                    <ng-container matColumnDef="type">
                      <th mat-sort-header mat-header-cell *matHeaderCellDef>
                        Type
                      </th>
                      <td mat-cell *matCellDef="let row">
                        {{row.type}}
                      </td>
                    </ng-container>
                    <ng-container matColumnDef="taxonomyLevel">
                      <th mat-sort-header mat-header-cell *matHeaderCellDef>
                        Taxonomy Level
                      </th>
                      <td mat-cell *matCellDef="let row">
                        {{row.taxonomyLevel}}
                      </td>
                    </ng-container>
                    <ng-container matColumnDef="del">
                      <th mat-sort-header mat-header-cell *matHeaderCellDef>

                      </th>
                      <td mat-cell *matCellDef="let row">
                        <div class="flex w-full">
                            <app-icon [icon]="'delete'"
                         style="color: rgba(92, 155, 49, 1)"></app-icon>
                        </div>
                      </td>
                    </ng-container>

                    <ng-container matColumnDef="id">
                        <th mat-sort-header mat-header-cell *matHeaderCellDef>

                        </th>
                        <td mat-cell *matCellDef="let row">
                          <div class="flex w-full">
                            <app-icon [icon]="'visibility'"
                            (click)="selectedRow = row;openPreviewFlyInPanel(previewTestQuestion, row)" style="color: rgba(92, 155, 49, 1)"></app-icon>
                          </div>
                        </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="displayColumns"></tr>
                    <tr mat-row *matRowDef="displayColumns">
                    </tr>
                    <tr class="mat-row" *matNoDataRow>
                      <td class="mat-cell text-center" [attr.colspan]="displayColumns.length">
                        No data Found.
                      </td>
                    </tr>
                  </table>
                </div>
                <mat-paginator [pageSizeOptions]="[10, 15, 20]" showFirstLastButtons aria-label="Select page of periodic elements">
                </mat-paginator>
            </section>
        </div> -->
    </ng-container>
</div>

<ng-template #previewTestQuestion>
    <app-flypanel-preview-test-questions (closed)="close()" [previousQuestion]="selectedRow"></app-flypanel-preview-test-questions>
</ng-template>
