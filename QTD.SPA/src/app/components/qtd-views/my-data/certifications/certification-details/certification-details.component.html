<div *ngIf="isLoading">
    <app-data-loader></app-data-loader>
  </div>
  <div *ngIf="!isLoading" class="ml-4 mr-4">
      <div class="flex flex-row flex-wrap mt-3 justify-between">
        <div class="flex flex-col">
          <p class="font-bold text-lg">{{name}}</p>
        </div>

        <div class="flex flex-row  items-center text-gray-four btn-group">
            <div class="cursor-pointer bg-gray-200 p-2 rounded">
              <label mat-button [matMenuTriggerFor]="menu" class="mb-0">
                <span *ngIf="isActive" class="font-bold">
                  <span style="color:green" class="mr-1">●</span>
                  Active
                </span>
                <span *ngIf="!isActive" class="font-bold">
                  <span style="color:red" class="mr-1">●</span>
                  Inactive
                </span>

              </label>
              <app-icon icon="expand_more" [matMenuTriggerFor]="menu"></app-icon>
              <mat-menu #menu="matMenu">
                <label mat-menu-item *ngIf="!isActive" (click)="changeStatus(statusModal,true)">
                    <span style="color:green" class="mr-1">●</span>Make
                    Active</label>

                <label mat-menu-item *ngIf="isActive" [disabled]="deleteCheck > 0" (click)="changeStatus(statusModal,false)" >
                    <span style="color:red" class="mr-1">●</span> Make
                    Inactive</label>
            </mat-menu>
            </div>

            <div class="ml-2 cursor-pointer ">
              <app-icon icon="more_horiz" [matMenuTriggerFor]="options"></app-icon>
              <mat-menu #options="matMenu">
                <label [disabled]="!isActive" (click)="openflyPanel(addNewCertification,'Edit')" mat-menu-item> Edit</label>
                <label [disabled]="!isActive" (click)="openflyPanel(addNewCertification,'Copy')" mat-menu-item> Copy</label>
                <label [disabled]="!isActive || deleteCheck>0" (click)="deleteProcedure(unlinkModal)" mat-menu-item> Delete</label>
              </mat-menu>
            </div>

          </div>
        </div>

        <div class="flex flex-row flex-wrap bg-white shadow-xs border-0.5 rounded px-2 pt-2 mt-4 justify-between">
            <p class="text-xs text-gray-four">Effective Date: {{EffectiveDate}}</p>
        </div>

        <div class="mt-4" *ngIf="description">
          <p>
              Description:
             {{description}}
             </p>
        </div>

        <div class="mt-4" *ngIf="!description">
          <p>
             No Description Entered
             </p>
        </div>


       <!--  <div class="flex flex-row flex-wrap bg-white shadow-xs border-0.5 rounded px-2 pt-2 mt-4">

          <p class="text-xs text-gray-four mr-4 ">Certification Acronym: <span class="text-qtd">{{acronym}}</span></p>
            <p class="text-xs text-gray-four mr-4 ">Certification Name <span class="text-qtd">{{name}}</span></p>
            <p class="text-xs text-gray-four mr-4 ">Effective Date: {{EffectiveDate}}</p>

        </div> -->
      </div>


    <div class="bg-white shadow-xs border-0.5 rounded px-2 pt-2 mt-4 ml-4 flex flex-col mr-4">

      <table>
        <tr class="text-sm text-gray-four">
          <th >Certified On Date</th>
          <th>Renewal Date</th>
          <th>Expiration Date</th>
          <th>Renewal Timeframe</th>
          <th>Credit Hrs required to renew</th>
          <th>Allow rollover</th>
          <th>Additional hours for certificate</th>
        </tr>

        <tr class="text-xs text-gray-four">
          <td>{{certifiedDate?'Required':'Not Required'}}</td>
          <td>{{renewalDate?'Required':'Not Required'}}</td>
          <td>{{expirationDate?'Required':'Not Required'}}</td>
          <td>{{renewalinterval}} Years</td>
          <td>{{creditHrs}}</td>
          <td>{{additionalHours}}</td>
          <td>{{totalAdditionalHours}}</td>

        </tr>

      </table>

      <!-- <p class="font-bold text-lg">Certificate Settings:</p> -->
      <!-- <div class="flex flex-row justify-between">
        <p class="text-xs text-gray-four mr-4 ">Certified On Date</p>
        <p class="text-xs text-gray-four mr-4 ">Renewal Date</p>
        <p class="text-xs text-gray-four mr-4 ">Expiration Date</p>
        <p class="text-xs text-gray-four mr-4 ">Renewal Timeframe</p>
        <p class="text-xs text-gray-four mr-4 ">Credit Hrs required to renew</p>
        <p class="text-xs text-gray-four mr-4 ">Allow rollover</p>
        <p class="text-xs text-gray-four mr-4 ">Additional hours for certificate</p>
      </div>

      <div class="flex flex-row justify-between">
        <p class="text-xs text-gray-four">{{certifiedDate?'Required':'Not Required'}}</p>
        <p class="text-xs text-gray-four mr-4 ">{{renewalDate?'Required':'Not Required'}}</p>
        <p class="text-xs text-gray-four mr-4 ">{{expirationDate?'Required':'Not Required'}}</p>
        <p class="text-xs text-gray-four mr-4 ">{{renewalinterval}}</p>
        <p class="text-xs text-gray-four mr-4 ">{{creditHrs?'Required':'Not Required'}}</p>
        <p class="text-xs text-gray-four mr-4 ">{{allowRolloverHours?'Required':'Not Required'}}</p>
        <p class="text-xs text-gray-four mr-4 ">{{additionalHours}}</p>
      </div> -->

      </div>



    <ng-template #addNewCertification>
        <app-fly-panel-add-certification (refresh)="refresh()" [oldCertification]="certification" [mode]= "modalType" [isCopy]="isCopy" 
        (closed)="flyPanelService.close()" (updateCertDetails)="getUpdatedCertification($event)">
        </app-fly-panel-add-certification>

      </ng-template>

      <ng-template #unlinkModal>
        <app-qtd-dialogue header="Delete {{('Certification' | labelReplacement)| async}}s" [description]="deleteDescription" cancelText="No"
          confirmText="Yes" [showEffectiveDateAndReason]="true" (canceled)="dialog.closeAll()" (confirmed)="Delete($event)">
        </app-qtd-dialogue>
      </ng-template>
      <ng-template #statusModal>
        <app-qtd-dialogue [header]="modalHeader" [description]="modalDescription" cancelText="No" confirmText="Yes"
            [showEffectiveDateAndReason]="true" (canceled)="dialog.closeAll()" (confirmed)="MakeActive($event,!isActive)">
        </app-qtd-dialogue>
    </ng-template>
