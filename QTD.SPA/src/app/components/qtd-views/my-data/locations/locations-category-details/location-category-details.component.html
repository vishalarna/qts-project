<div *ngIf="isLoading">
  <app-data-loader></app-data-loader>
</div>
<div *ngIf="!isLoading" class="ml-4 mr-4">
    <div class="flex flex-row flex-wrap mt-3 justify-between">
      <div class="flex flex-col">
        <p class="font-bold text-lg">{{title}}</p>
        
        <!-- <p class="text-xs text-gray-four">Issuing Authority: {{issuAuthTitle}}</p>
        <p class="font-bold text-lg">{{procTitle}}</p> -->
      </div>
      <div class="flex flex-row  items-center text-gray-four btn-group">
        <div class="cursor-pointer bg-gray-200 p-2 rounded">
          <label mat-button [matMenuTriggerFor]="menu" class="mb-0">
            <span *ngIf="isActive" class="font-bold">
              <span style="color:green" class="mr-1">●</span>
              Active
            </span>
            <span *ngIf="!isActive" class="font-bold">
              <span style="color:red" class="mr-1">●</span>
              Inactive
            </span>
  
          </label>
          <app-icon icon="expand_more" [matMenuTriggerFor]="menu"></app-icon>
          <mat-menu #menu="matMenu">
            <label mat-menu-item *ngIf="!isActive" (click)="changeStatus(statusModal,true)">
              <span style="color:green" class="mr-1">●</span>Make
              Active</label>
  
            <label mat-menu-item *ngIf="isActive" (click)="changeStatus(statusModal,false)">
              <span style="color:red" class="mr-1">●</span> Make
              Inactive</label>
          </mat-menu>
        </div>
 
        <div class="ml-2 cursor-pointer ">
          <app-icon icon="more_horiz" [matMenuTriggerFor]="options"></app-icon>
          <mat-menu #options="matMenu">
            <label [disabled]="!isActive" (click)="openFlyPanel(addNewProcedure,'Edit')" mat-menu-item> Edit</label>
            <label [disabled]="!isActive" (click)="openFlyPanel(addNewProcedure,'Copy')" mat-menu-item> Copy</label>
            <div class="flex flex-row">
              <label [disabled]="childernCount || !isActive" (click)="deleteProcedure(unlinkModal)" mat-menu-item> Delete
              </label>  
              
              <app-icon icon="help_outline" class="ml-2 pt-2" matTooltip="Categories with Locations can not be deleted."></app-icon>
            </div>
            
          </mat-menu>
        </div>
  
      </div>

      
    </div>
    <div class="flex flex-col">
        <hr class="ml-2 mt-2">
        <p class="ml-2 mt-3">

               {{description}}
           </p>
           <p class="ml-2 mt-2">Category Link :
            <app-link class="text-qtd" [text]="website">
            </app-link>
          </p>
    </div>
  
  <!-- <ng-template #addNewProcedure>
    <app-fly-panel-add-location-category (refresh)="refresh()" [mode]= "modalType" [isCopy]="isCopy" [oldLocationCategory]="location_Category" (closed)="flyPanelService.close();populateData()" (refresh)="populateData()"></app-fly-panel-add-location-category>
  </ng-template> -->

  <ng-template #addNewProcedure>
    <app-fly-panel-add-location-category [mode]= "modalType" [isCopy]="isCopy" [oldLocationCategory]="location_Category" (closed)="flyPanelService.close()" (refresh)="refresh()"></app-fly-panel-add-location-category>
  </ng-template>
  
  <ng-template #unlinkModal>
    <app-qtd-dialogue header="Delete Category" [description]="deleteDescription" cancelText="No"
      confirmText="Yes" [showEffectiveDateAndReason]="true" (canceled)="dialog.closeAll()" (confirmed)="Delete($event)">
    </app-qtd-dialogue>
  </ng-template>

  <ng-template #statusModal>
    <app-qtd-dialogue [header]="modalHeader" [description]="modalDescription" cancelText="No" confirmText="Yes"
        [showEffectiveDateAndReason]="true" (canceled)="dialog.closeAll()" (confirmed)="MakeActive($event,!isActive)">
    </app-qtd-dialogue>
</ng-template>
  