<div class="ml-4 mr-4">
  <div class="flex flex-row flex-wrap mt-3 justify-between border-b pb-3">
    <div class="flex flex-col">
      <!-- <p class="text-xs text-gray-four">PowerCo Procedures</p> -->
      <p class="font-bold text-lg">{{toolCategoryData?.title}}</p>
    </div>
    <div class="flex flex-row  items-center text-gray-four btn-group">
      <div class="cursor-pointer bg-gray-200 p-2 rounded">
        <label mat-button [matMenuTriggerFor]="menu" class="mb-0">
            <span *ngIf="isActive" class="font-bold">
                <span style="color:green" class="mr-1">●</span>
                Active
            </span>
          <span *ngIf="!isActive" class="font-bold">
                <span style="color:red" class="mr-1">●</span>
                Inactive
            </span>

        </label>
        <app-icon icon="expand_more" [matMenuTriggerFor]="menu"></app-icon>
      </div>
      <mat-menu #menu="matMenu">
        <label mat-menu-item *ngIf="!isActive" (click)="changeStatus(statusModal,true)">
          <span style="color:green" class="mr-1">●</span>Make
          Active</label>

        <label mat-menu-item *ngIf="isActive" (click)="changeStatus(statusModal,false)"
               [disabled]="toolCategoryData?.tools.length > 0">
          <span style="color:red" class="mr-1">●</span> Make
          Inactive</label>
      </mat-menu>

      <app-button ButtonType="icon" class="text-gray-four" icon="more_horiz" [matMenuTriggerFor]="dropmenu">
      </app-button>
      <mat-menu #dropmenu="matMenu">
        <label (click)="openEditOrCopy(editAndCopy,false)" mat-menu-item [disabled]="isActive === false">Edit</label>
        <label (click)="openEditOrCopy(editAndCopy,true)" mat-menu-item [disabled]="isActive === false">Copy</label>
        <!-- <label (click)="openDeleteDialog(deleteDialog)"  mat-menu-item>Delete</label> -->

        <div class="flex flex-row">
          <label mat-menu-item (click)="openDeleteDialog(deleteDialog)" [disabled]="toolCategoryData?.tools.length > 0">
            Delete
          </label>
          <app-icon class="pt-3" icon="help_outline" *ngIf="toolCategoryData?.tools.length > 0"
                    matTooltip="The Delete option is not available due to linked data."></app-icon>
        </div>
      </mat-menu>
    </div>
  </div>

  <div class="flex flex-col mt-3 justify-between border-b pb-3">

    <p class="font-bold">Category Description: </p>
    <p class="text-xm">{{toolCategoryData?.description}}</p>

    <p class="font-bold">Website: </p>
    <p class="text-xm">{{toolCategoryData?.website}}</p>
  </div>
</div>

<ng-template #editAndCopy>
  <app-fly-panel-add-tool-category [isCopy]="makeCopy" [oldToolCat]="toolCategoryData" (refreshCategories)="refresh()"
                                   (closed)="flyPanelService.close()"></app-fly-panel-add-tool-category>
</ng-template>


<ng-template #deleteDialog>
  <app-qtd-dialogue [header]="dialogTitle" [description]="dialogDesc" cancelText="No" confirmText="Yes"
                    [showEffectiveDateAndReason]="true"
                    (canceled)="dialog.closeAll()" (confirmed)="deleteData($event)"></app-qtd-dialogue>
</ng-template>

<ng-template #statusModal>
  <app-qtd-dialogue [header]="modalHeader" [description]="modalDescription" cancelText="No" confirmText="Yes"
                    [showEffectiveDateAndReason]="true" (canceled)="dialog.closeAll()"
                    (confirmed)="MakeActive($event,!isActive)">
  </app-qtd-dialogue>
</ng-template>


