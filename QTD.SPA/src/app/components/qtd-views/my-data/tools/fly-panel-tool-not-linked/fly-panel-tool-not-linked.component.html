<div class="flex flex-row justify-between items-center px-12 mt-5">
  <p class="text-xl font-bold text-gray-900">{{getTitleName()  | dynamicLabelReplacement| async}}</p>
  <app-button ButtonType='icon' icon="close" (click)="flyPanelSrvc.close()"></app-button>
</div>

<app-spinner *ngIf="isLoading"></app-spinner>

<ng-container *ngIf="!activeInactiveCheck && treedataSource.data.length">
  <div class="flex flex-col px-12">

    <mat-tree [dataSource]="treedataSource" [treeControl]="tasktreeControl" class="qtd-tree">
      <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle matTreeNodePadding>
        <ng-container>
          <app-icon *ngIf="node.isSafetyHazard" icon="link_off"></app-icon>
          {{node.description}}
        </ng-container>
      </mat-tree-node>

      <mat-nested-tree-node *matTreeNodeDef="let node; when: hasTaskChild">
        <div class="mat-tree-node">
          <button style="outline:none;" mat-icon-button matTreeNodeToggle
            [attr.aria-label]="'Toggle ' + node.description">
            <app-icon [icon]="tasktreeControl.isExpanded(node) ? 'expand_more' : 'expand_less'">
            </app-icon>
          </button>

          {{node.description}}
        </div>
        <div [class.qtd-tree-invisible]="!tasktreeControl.isExpanded(node)" role="group">
          <ng-container matTreeNodeOutlet></ng-container>
        </div>
      </mat-nested-tree-node>
    </mat-tree>
  </div>
</ng-container>

<ng-container *ngIf="activeInactiveCheck && treedataSource.data.length">
  <div class="flex flex-col px-12">

    <mat-tree [dataSource]="treedataSource" [treeControl]="tasktreeControl" class="qtd-tree">
      <!-- This is the tree node template for leaf nodes -->
      <!-- There is inline padding applied to this node using styles.
                  This padding value depends on the mat-icon-button width. -->
      <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle matTreeNodePadding>
        <!--  <app-icon icon="link_off" (click)="unlinkItemsModal(unlinkTaskModal, node.id)"></app-icon>
                  &nbsp;&nbsp;
                  {{node.description}} -->

        <span *ngIf="panelType === 'Catactive' || panelType === 'Catinactive'">
          {{node.id}} - {{node.title}}
        </span>
        <span *ngIf="panelType === 'Active' || panelType === 'Inactive'">
          {{node.number}} - {{node.name}}
        </span>
      </mat-tree-node>
    </mat-tree>
  </div>
</ng-container>
