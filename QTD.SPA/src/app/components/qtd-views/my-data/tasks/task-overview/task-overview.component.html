<div class="flex flex-row flex-wrap ml-4 mt-3 px-10">
  <p class="font-bold text-lg">{{("Task" | labelReplacement)| async}}s Overview</p>
</div>
<app-data-loader *ngIf="spinner"></app-data-loader>
<div class="px-10 pb-12 flex flex-row" *ngIf="!spinner">

  <div class="container bg-white rounded m-3 pt-3 pl-3 shadow-sm w-fit mb-4">

    <div class="mb-4">{{("Task" | labelReplacement)| async}}s</div>
    <div class="flex flex-row">
      <div class="flex flex-col">
        <span    (click)="stats.activeTask>0 && openFlyInPanel(taskNotLinkedTo,'Active')" [ngClass]="{'text-xl text-qtd font-bold cursor-pointer':stats.activeTask>0 ,'text-lg text-black':stats.activeTask==0}">
          {{stats.activeTask | number : '2.'}}

        </span>
        <p>Active</p>
      </div>
      <span class=" pl-3 pr-3"></span>
      <div class="flex flex-col">
        <span   (click)="stats.inActiveTask>0 && openFlyInPanel(taskNotLinkedTo,'Inactive')" [ngClass]="{'text-xl text-red-600 font-bold cursor-pointer':stats.inActiveTask>0 ,'text-lg text-black':stats.inActiveTask==0}">
          {{stats.inActiveTask | number : '2.'}}
      </span>
        <p>Inactive</p>
      </div>
    </div>


  </div>

  <div class="container bg-white rounded m-3 pt-3 pl-3 shadow-sm mb-4 w-fit">

    <div class="mb-4">{{("Task" | labelReplacement)| async}}s Not Linked to</div>
    <div class="flex flex-row">
      <div class="flex flex-col">
        <span  [ngClass]="{'text-xl text-qtd font-bold cursor-pointer':stats.enablingObjectives>0 ,'text-lg text-black':stats.enablingObjectives==0}"
          (click)="stats.enablingObjectives>0 && openFlyInPanel(taskNotLinkedTo,'Enabling Objectives')">{{stats.enablingObjectives}}</span>
        <p>{{("Enabling Objective" | labelReplacement)| async}}</p>
      </div>
      <span class=" pl-3 pr-3"></span>
      <div class="flex flex-col">
        <span [ngClass]="{'text-xl text-qtd font-bold cursor-pointer':stats.procedures>0 ,'text-lg text-black':stats.procedures==0}"
          (click)="stats.procedures>0 && openFlyInPanel(taskNotLinkedTo,'Procedures')">{{stats.procedures}}</span>
        <p>{{("Procedure" | labelReplacement)| async}}s</p>
      </div>
      <span class=" pl-3 pr-3"></span>
      <div class="flex flex-col">
        <span  [ngClass]="{'text-xl text-qtd font-bold cursor-pointer':stats.safetyHazards>0 ,'text-lg text-black':stats.safetyHazards==0}"
          (click)="stats.safetyHazards>0 && openFlyInPanel(taskNotLinkedTo,'Safety Hazards')">{{stats.safetyHazards}}</span>
        <p>{{("Safety Hazard" | labelReplacement)| async}}s</p>
      </div>
      <span class=" pl-3 pr-3"></span>
      <div class="flex flex-col">
        <span  [ngClass]="{'text-xl text-qtd font-bold cursor-pointer':stats.regulations>0 ,'text-lg text-black':stats.regulations==0}"
          (click)="stats.regulations>0 && openFlyInPanel(taskNotLinkedTo, 'Regulations')">{{stats.regulations}}</span>
        <p>Regulation</p>
      </div>
      <span class=" pl-3 pr-3"></span>
      <div class="flex flex-col">
        <span   [ngClass]="{'text-xl text-qtd font-bold cursor-pointer':stats.positions>0 ,'text-lg text-black':stats.positions==0}"
          (click)="stats.positions>0 && openFlyInPanel(taskNotLinkedTo, 'Positions')">{{stats.positions}}</span>
        <p>{{("Position" | labelReplacement)| async}}s</p>
      </div>
      <span class=" pl-3 pr-3"></span>
      <div class="flex flex-col">
        <span  [ngClass]="{'text-xl text-qtd font-bold cursor-pointer':stats.ila>0 ,'text-lg text-black':stats.ila==0}"
          (click)="stats.ila>0 && openFlyInPanel(taskNotLinkedTo, 'ILAs')">{{stats.ila}}</span>
        <p>{{("ILA" | labelReplacement)| async}}s</p>
      </div>
      <span class=" pl-3 pr-3"></span>
    </div>


  </div>

</div>
<div class="px-10 pb-12 flex flex-row">
  <div class="container bg-white rounded m-3 pt-3 pl-3 shadow-sm mb-4 w-full">
    <p class="font-bold text-lg">Pending {{("Task" | labelReplacement)| async}}s Reviews</p>
    <p class="text-xs text-gray-400">{{TaskData.length}} {{("Task" | labelReplacement)| async}}s need to be reviewed</p>
    <div (click)="redirectToTask(data)" class="flex flex-row cursor-pointer borderBottom pb-2 pt-3 mb-3" *ngFor="let data of TaskData">
      <p class="font-bold">{{data.letter + ' ' + data.daNumber + "." +
        data.sdaNumber + "." + data.task.number + " "}}</p> &nbsp;
        <p>{{data.task.description}}</p>
    </div>
  </div>
</div>
<div class="flex flex-row flex-wrap ml-4 mr-4 justify-between px-10">
  <p class="font-bold text-lg">Latest Activity</p>
  <app-button variant="text" text="View all history" (clicked)="openFlyInPanel(history,'')"></app-button>
</div>
<app-data-loader *ngIf="!dataSource"></app-data-loader>
<div class="px-12 pb-12 mt-5" *ngIf="dataSource">
  <div class="container bg-white rounded m-3 pt-3 pl-3 shadow-sm mb-4">

    <mat-table [dataSource]="dataSource" matSort *ngIf="dataSource">
      <ng-container matColumnDef="name">
        <mat-header-cell *matHeaderCellDef mat-sort-header> {{("Task" | labelReplacement)| async}}</mat-header-cell>
        <mat-cell *matCellDef="let row"> {{row.name}} </mat-cell>
      </ng-container>
      <ng-container matColumnDef="desc">
        <mat-header-cell *matHeaderCellDef mat-sort-header> Description of Change </mat-header-cell>
        <mat-cell *matCellDef="let row"> {{row.desc}} </mat-cell>
      </ng-container>
      <ng-container matColumnDef="modifyDate">
        <mat-header-cell *matHeaderCellDef mat-sort-header> Modified By </mat-header-cell>
        <mat-cell *matCellDef="let row">
          <div class="flex flex-col">
            <span class="text-qtd">{{row.modifyBy}}</span>
            <span class="mt-2">{{row.modifyDate | date:'medium' }}</span>
          </div>
        </mat-cell>
      </ng-container>
      <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
      <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>

      <!-- Row shown when there is no matching data.-->
      <tr class="mat-row flex text-center " *matNoDataRow>
        <td class="mat-cell w-full m-2">No data matching the filter</td>
      </tr>

    </mat-table>



  </div>
</div>

<ng-template #taskNotLinkedTo>
  <app-fly-panel-task-not-linked [activeInactivecheck]="activeInactivecheck" (closed)="this.flyPanelSrvc.close()" [NotLinkedToName]="NotLinkedToPanelName">
  </app-fly-panel-task-not-linked>
</ng-template>

<ng-template #history>
  <app-fly-panel-task-history (closed)="this.flyPanelSrvc.close()"></app-fly-panel-task-history>
</ng-template>
