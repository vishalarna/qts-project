<div class="ml-4 mr-4 ">
    <div class="flex flex-row flex-wrap mt-3 justify-between">
        <div class="flex flex-col">
            <p class="text-xs text-gray-four">Issuing Authority: {{rr.issuingAuthorityCompact?.title}}</p>
            <p class="font-bold text-lg">{{rr.number}} - {{rr.title}}</p>
        </div>
        <div class="flex flex-row  items-center text-gray-four btn-group">
            <div class="cursor-pointer bg-gray-200 p-2 rounded">
                <label mat-button [matMenuTriggerFor]="menu" class="mb-0">
                    <span *ngIf="isActive" class="font-bold">
                        <span style="color:green" class="mr-1">●</span>
                        Active
                    </span>
                    <span *ngIf="!isActive" class="font-bold">
                        <span style="color:red" class="mr-1">●</span>
                        Inactive
                    </span>

                </label>
                <app-icon icon="expand_more" [matMenuTriggerFor]="menu"></app-icon>
                <mat-menu #menu="matMenu">
                    <label mat-menu-item *ngIf="!isActive" (click)="toggleActive(activeInactiveModal,true)">
                        <span style="color:green" class="mr-1">●</span>Make
                        Active</label>

                    <label mat-menu-item *ngIf="isActive" [disabled]="issuingAuthorityCheck" (click)="toggleActive(activeInactiveModal,false)">
                        <span style="color:red" class="mr-1">●</span> Make
                        Inactive</label>
                </mat-menu>
            </div>
            <div class="ml-2 cursor-pointer ">
                <app-icon icon="more_horiz" [matMenuTriggerFor]="options"></app-icon>
                <mat-menu #options="matMenu">
                    <label [disabled]="!isActive || issuingAuthorityCheck"  (click)="editRR(CopyOrEditRegulatoryRequirement)" mat-menu-item> Edit</label>
                    <label [disabled]="!isActive || issuingAuthorityCheck" (click)="copyRR(CopyOrEditRegulatoryRequirement)" mat-menu-item> Copy</label>
                    <label [disabled]="regulationDeleteCheck || !isActive || issuingAuthorityCheck" (click)="deleteData(deleteModal)" mat-menu-item> Delete</label>
                </mat-menu>
            </div>

        </div>
    </div>

    <div class="flex flex-row flex-wrap bg-white shadow-xs border-0.5 rounded px-2 pt-2">
        <p class="text-xs text-gray-four mr-4 ">Revision Number: {{rr.revisionNumber}}</p>
        <p class="text-xs text-gray-four mr-4 ">Effective Date: {{datePipe.transform(rr.effectiveDate,'MM-dd-yyyy')}}</p>
        <p class="text-xs text-gray-four mr-4 ">Hyperlink: <app-link class="text-qtd" [text]="rr.hyperLink">
            </app-link>
        </p>
        <p class="text-xs text-gray-four mr-4 ">PDF: {{this.rr.fileName}}</p>
    </div>

    <mat-tab-group class="mt-5">
        <mat-tab label="{{(('Task' | labelReplacement)| async) | uppercase}}">
            <app-rr-task (regulationDeleteCheck)="regulationDeleteCheck = $event" [issuingAuthorityCheck]="issuingAuthorityCheck || !rr.active" [rrTaskTitle]="rr.number + ' - ' + rr.title  "></app-rr-task>
        </mat-tab>
        <mat-tab label="{{(('Enabling Objective' | labelReplacement)| async) | uppercase}}">
            <app-rr-enabling-objective (regulationDeleteCheck)="regulationDeleteCheck = $event" [issuingAuthorityCheck]="issuingAuthorityCheck || !rr.active" [regTitle]="rr.number + ' - ' + rr.title  "></app-rr-enabling-objective>
        </mat-tab>
        <mat-tab label="{{(('Safety Hazard' | labelReplacement)| async) | uppercase}}s">
            <app-rr-safety-hazard (regulationDeleteCheck)="regulationDeleteCheck = $event" [issuingAuthorityCheck]="issuingAuthorityCheck || !rr.active" [regTitle]="rr.number + ' - ' + rr.title  "></app-rr-safety-hazard>
        </mat-tab>
        <mat-tab label="{{(('ILA' | labelReplacement)| async)| uppercase}}s">
            <app-rr-ila (regulationDeleteCheck)="regulationDeleteCheck = $event" [issuingAuthorityCheck]="issuingAuthorityCheck || !rr.active" [regTitle]="rr.number + ' - ' + rr.title  "></app-rr-ila>
        </mat-tab>
        <mat-tab label="{{(('Procedure'| labelReplacement)| async) | uppercase}}s">
            <app-rr-procedure (regulationDeleteCheck)="regulationDeleteCheck = $event" [issuingAuthorityCheck]="issuingAuthorityCheck || !rr.active" [regTitle]="rr.number + ' - ' + rr.title"></app-rr-procedure>
        </mat-tab>
    </mat-tab-group>
</div>

<ng-template #activeInactiveModal>
  <app-qtd-dialogue [header]="dialogHeader" [description]="dialogDescription" cancelText="No" confirmText="Yes"
    [showEffectiveDateAndReason]="true" (canceled)="dialog.closeAll()" (confirmed)="getData($event)">
  </app-qtd-dialogue>
</ng-template>

<ng-template #deleteModal>
  <app-qtd-dialogue [header]="dialogHeader" [description]="dialogDescription" cancelText="No" confirmText="Yes"
    [showEffectiveDateAndReason]="true" (canceled)="dialog.closeAll()" (confirmed)="getDeleteReason($event)">
  </app-qtd-dialogue>
</ng-template>

<ng-template #CopyOrEditRegulatoryRequirement>
  <app-fly-panel-add-rr [makeCopy]="makeCopy" [oldId]="rr.id"  (closed)="flyPanelService.close()"></app-fly-panel-add-rr>
</ng-template>
