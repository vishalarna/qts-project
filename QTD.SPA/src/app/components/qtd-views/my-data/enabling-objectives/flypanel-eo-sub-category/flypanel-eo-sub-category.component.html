<div [ngClass]="{'px-12 py-12':hasSpace}" class="flex flex-col">

  <div class="flex flex-row justify-between items-center mt-2">
    <p *ngIf="!subCategory" class="text-xl font-bold text-gray-900">Add New Sub Category</p>
    <p *ngIf="subCategory" class="text-xl font-bold text-gray-900">Edit Sub Category</p>
    <app-button (clicked)="closed.emit('fp-add-sub-cat-closed')" ButtonType='icon' icon="close">
    </app-button>
  </div>

  <form class="flex flex-col" [formGroup]="subCategoryForm">
    <div class="mt-3">
      <app-label [for]="'category'" text="Category " class="label required"></app-label>
      <mat-select formControlName="category" placeholder="Select Category"
        (selectionChange)="getCategories($event.value)" class="appearance-none rounded border w-full px-4 py-2.5 mt-2">
        <mat-option *ngFor="let d of categories" [value]="d.id" [hidden]="!d.active">
          {{d.number}} - {{d.title}}
        </mat-option>
      </mat-select>
      <app-input-error *ngIf="subCategoryForm.get('category')?.invalid" text="Category is Required">
      </app-input-error>
    </div>
    <div class="mt-3">
      <app-label [for]="'number'" text="Sub Category Number " class="label required"></app-label>
      <app-textbox formControlName="number"></app-textbox>
      <app-input-error *ngIf="subCategoryForm.get('number')?.invalid" text="Number is Required">
      </app-input-error>
    </div>
    <div class="mt-3">
      <app-label [for]="'title'" text="Sub Category Title " class="label required"></app-label>
      <app-textbox formControlName="title" placeholder="Title"></app-textbox>
      <app-input-error *ngIf="subCategoryForm.get('title')?.invalid || subCategoryForm.get('title')?.hasError('whitespaceOnly')" text="Title is Required Or Contains WhiteSpaces">
      </app-input-error>
    </div>
    <div class="mt-3">
      <app-label [for]="'desc'" text="Sub Category Description "></app-label>
      <app-textarea [value]="subCategoryForm.get('desc')?.value ?? '' "  formControlName="desc" type="text" placeholder="Please enter description here">
      </app-textarea>
      <!-- <app-textarea formControlName="desc" placeholder="Please enter description here">
            </app-textarea> -->
      <app-input-error *ngIf="subCategoryForm.get('desc')?.invalid" text="Description is Required">
      </app-input-error>
    </div>
    <div class="mt-3">
      <app-label [for]="'effectiveDate'" text="Effective Date"></app-label>
      <app-date  formControlName="effectiveDate"></app-date>
    </div>
    <div class="mt-3">
      <app-label [for]="'reason'" text="Reason for Revision" class=" label required"></app-label>
      <app-textarea [value]="subCategoryForm.get('reason')?.value ?? '' "  formControlName="reason" placeholder="Please enter Reasons for Revision here">
      </app-textarea>
      <app-input-error *ngIf="subCategoryForm.get('reason')?.invalid || subCategoryForm.get('reason')?.hasError('whitespaceOnly')" text="Reason for Revision is Required Or Contains WhiteSpaces">
      </app-input-error>
      <!-- <app-textarea formControlName="reason" placeholder="Please enter Reasons for Revision here">
            </app-textarea> -->
    </div>
    <div class="flex flex-row flex-grow justify-between pt-12">
      <div class="flex flex-row" *ngIf="!subCategory">
        <mat-checkbox formControlName="AddAnother"></mat-checkbox>
        <span class="ml-1">Add another Sub Category</span>
      </div>

      <div>
        <app-button [spinner]="showSpinner" *ngIf="!subCategory" [disabled]="subCategoryForm.invalid || showSpinner"
          (clicked)="saveSubCategory()" text="Save" size="sm"></app-button>
      </div>
    </div>

    <div class="flex flex-row-reverse">
      <app-button  [spinner]="showSpinner" *ngIf="subCategory" [disabled]="subCategoryForm.invalid || showSpinner"
      (clicked)="updateSubCategory()" text="Update" size="sm"></app-button>
    </div>
  </form>
</div>
