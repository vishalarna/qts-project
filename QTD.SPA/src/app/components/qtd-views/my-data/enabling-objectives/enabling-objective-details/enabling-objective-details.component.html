<!-- <app-data-loader *ngIf="this.task === undefined"></app-data-loader> -->
<ng-container *ngIf="!editView && eo">
  <div class="ml-4 mr-4 ">
    <div *ngIf="!eo.isMetaEO" class="flex flex-row mt-2">
      <label (click)="changeView()" class="defaultLabel" [ngClass]="{'greenText': editView,'grayText':!editView}"><span
          class="mr-1" style="color:green" *ngIf="editView">●</span>Edit View</label>
      <span class="mx-2 text-gray-400"><strong>|</strong></span>
      <label class="defaultLabel" (click)="editView = false"
        [ngClass]="{'greenText': !editView,'grayText':editView}"><span class="mr-1" style="color:green"
          *ngIf="!editView">●</span>Live View</label>
    </div>
    <div class="flex flex-row flex-wrap mt-3 justify-between border-b-2 pb-4">
      <div class="flex flex-row w-9/12 flex-nowrap break-all">
        <div class="mr-4 mt-1">
          <span *ngIf="eo.isMetaEO" class="ml-1 qtd-meta-box p-1 font-bold">{{'meta'|titlecase}}</span>
        </div>
        <!-- <p *ngIf="task.isMeta" class="mr-3 qtd-meta-box p-2 font-bold">{{'meta'|titlecase}}</p> -->
        <p class="text-lg break-all"><strong>{{eo.fullNumber}}</strong></p>
        <p class="ml-2 text-lg break-all text-gray-500 font-normal">{{eo.description}}</p>
      </div>
      <div class="flex flex-row  items-center text-gray-four btn-group">
        <div class="cursor-pointer bg-gray-200 p-2 rounded">
          <label mat-button [matMenuTriggerFor]="menu" class="mb-0">
            <span *ngIf="eo.active" class="font-bold">
              <span style="color:green" class="mr-1">●</span>
              Active
            </span>
            <span *ngIf="!eo.active" class="font-bold">
              <span style="color:red" class="mr-1">●</span>
              Inactive
            </span>

          </label>
          <app-icon icon="expand_more" [matMenuTriggerFor]="menu"></app-icon>
          <mat-menu #menu="matMenu">
            <label (click)="activeModal(dialogModal,true)" mat-menu-item *ngIf="!eo.active">
              <span style="color:green" class="mr-1">●</span>Make
              Active</label>
            <!-- <span [matTooltip]="hasLinks>0?'The Make Inactive option is not available due to linked data':''"> -->
            <span class="flex flex-row" style="align-items:baseline;">
              <label [disabled]="cannotMakeEOInactive" (click)="activeModal(dialogModal,false)" mat-menu-item *ngIf="eo.active">
                <span style="color:red" class="mr-1">●</span> Make
                Inactive</label>
              <app-icon *ngIf="cannotMakeEOInactive" icon="help_outline" [matTooltip]="'The Make Inactive option is not available due to linked data in EMP'"></app-icon>
              </span>
          </mat-menu>
        </div>
        <div class="ml-2 cursor-pointer ">
          <app-icon icon="more_horiz" [matMenuTriggerFor]="options"></app-icon>
          <mat-menu #options="matMenu">
            <label class="label_style" (click)="openEditCopyEO(editCopyEO,false,false)" [disabled]="!eo.active"
              mat-menu-item> Edit</label>
            <label class="label_style" (click)="openEditCopyEO(editCopyEO,true,false)" [disabled]="!eo.active"
              mat-menu-item>
              Copy</label>
            <label class="label_style" (click)="openEditCopyEO(editCopyEO,false,true)" [disabled]="!eo.active"
              mat-menu-item> Change
              Category / Subcategory / Topic</label>
            <span [matTooltip]="hasLinks ? 'The Delete option is not available due to linked data.':''">
              <label class="label_style" (click)="deleteModal(dialogModal)"
                [disabled]="!eo.active || hasLinks" mat-menu-item>
                Delete</label>
            </span>

          </mat-menu>
        </div>

      </div>
    </div>
    <div class="flex flex-col mt-4">
      <div class="flex flex-row justify-between bg-white p-3 rounded-sm shadow-sm">
        <div class="flex flex-row mt-2">
          <div class="mt-2 mr-3 iconSize">
            <app-icon icon="history"></app-icon>
          </div>
          <div class="flex flex-col space-y-0">
            <div class="flex flex-row space-x-2 space-y-0">
              <p class="font-bold text-sm mb-0">{{histStats.modified_by}}</p>
              <span class="font-light text-gray-400 text-sm">Last Modified {{histStats.modified_date |
                date:"medium"}}</span>
            </div>
            <div>
              <app-button (clicked)="openFlyPanel(verPanel)" variant="text" text="View All History">
              </app-button>
            </div>
          </div>
        </div>
        <div class="mt-2">
          <p class="p-2 rounded-md" style="color:#4284C0;background-color: #EEF7FF;">Published</p>
        </div>
      </div>
      <ng-container *ngIf="eo.isMetaEO">
        <app-data-loader *ngIf="!DataSource"></app-data-loader>
        <div class="flex flex-row flex-wrap justify-between mb-1 mt-3  px-3 py-3">
          <p class="text-xs text-gray-four pt-2">{{srcList.length}} {{("Enabling Objective" | labelReplacement)| async}} linked to Selected Meta Enabling
            Objective</p>
          <app-button (clicked)="openFlyPanel(metaLink)" [disabled]="!isActive" variant="text" icon="link"
            iconPosition="left" size="sm" text="Link {{('Enabling Objective' | labelReplacement)| async}}">
          </app-button>
        </div>
        <div class="flex flex-row flex-wrap bg-gray-one justify-between mb-3 mt-3  px-3 py-3 rounded"
          *ngIf="unlinkIds.length > 0">
          <p class="text-xs text-gray-four pt-2">{{unlinkIds.length}} {{("Enabling Objective" | labelReplacement)| async}} selected</p>
          <app-button [disabled]="unlinkSpinner" [spinner]="unlinkSpinner" (clicked)="openUnlinkDialog(unlinkDialog)"
            icon="link_off" iconPosition="left" size="sm" color="secondary" text="Unlink EOs">
          </app-button>
        </div>
        <div *ngIf="isReordered" class="flex flex-row justify-between mb-2">
          <p class="text-xs text-gray-four pt-2">Confirm applying the current reorder?</p>
          <div class="flex flex-row">
            <app-button [spinner]="spinner" [disabled]="spinner" (clicked)="linkMetaEOTOEOs()" size="sm" text="Apply"
              class="mr-3"></app-button>
            <app-button [disabled]="spinner" (clicked)="getLinkedEOs()" size="sm" color="secondary" text="Cancel">
            </app-button>
          </div>
        </div>
        <div class="shadow-md mt-2" *ngIf="DataSource">
          <table mat-table #metaTaskTbl [dataSource]="DataSource" matSort class="w-full" cdkDropList
            [cdkDropListData]="DataSource" (cdkDropListDropped)="dropTable($event)">
            <ng-container matColumnDef="order">
              <th mat-header-cell *matHeaderCellDef></th>
              <td mat-cell *matCellDef="lt row">
                <app-icon cdkDragHandle matTooltip="Drag to reorder the row"
                  style="pointer-events:all;color: darkgrey!important;cursor:move" icon="drag_indicator">
                </app-icon>
              </td>
            </ng-container>
            <ng-container matColumnDef="id">
              <th mat-header-cell *matHeaderCellDef>
                <mat-checkbox (change)="$event ? masterToggle() : null"
                  [checked]="selection.hasValue() && isAllSelected()"
                  [indeterminate]="selection.hasValue() && !isAllSelected()">
                </mat-checkbox>
              </th>
              <td mat-cell *matCellDef="let row">
                <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selectrow(row) : null"
                  [checked]="selection.isSelected(row)">
                </mat-checkbox>
              </td>
            </ng-container>
            <ng-container matColumnDef="sequence">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> Sequence #
              </th>
              <td mat-cell *matCellDef="let row,index as i">
                {{(i+1) | number : '2.'}} </td>
            </ng-container>
            <ng-container matColumnDef="number">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> Number #
              </th>
              <td mat-cell *matCellDef="let row">
                {{row.number}} </td>
            </ng-container>
            <ng-container matColumnDef="description">
              <th style="width:60%;" mat-header-cell *matHeaderCellDef mat-sort-header> Description
              </th>
              <td mat-cell *matCellDef="let row">
                <span>{{row.description}}</span>
              </td>
            </ng-container>

            <ng-container matColumnDef="unlink">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>
              </th>
              <td mat-cell *matCellDef="let row" class="justify-between">

                <app-button [disabled]="unlinkSpinner" (clicked)="openUnlinkDialog(unlinkDialog,row.id)"
                  ButtonType="icon" icon="link_off" style="color:lightgray"></app-button>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayColumns"></tr>
            <tr mat-row [ngClass]="row.active ? '':'inactiveRow'" *matRowDef="let row; columns: displayColumns;" cdkDrag [cdkDragData]="row"></tr>

            <!-- Row shown when there is no matching data.-->
            <tr class="mat-row text-center " *matNoDataRow>
              <td class="mat-cell w-full m-2" [colSpan]="displayColumns.length">No data to display</td>
            </tr>

          </table>
          <mat-paginator [pageSizeOptions]="[20, 40, 60]" showFirstLastButtons
            aria-label="Select page of periodic elements">
          </mat-paginator>
        </div>
      </ng-container>
      <ng-container>
        <app-data-loader *ngIf="eoStats === undefined"></app-data-loader>
        <div *ngIf="eoStats !== undefined"
          class="flex flex-row mt-5 ml-3 pb-2 bg-white w-full shadow-sm" style="justify-content: space-around;">
          <div *ngIf="eo.isSkillQualification">
            <div class="ml-3 mt-3 mb-1 w-fit mainBorder pr-4">
              <p class="mb-1 text-sm">{{("Position" | labelReplacement)| async}}s</p>
              <h2 class="mb-0">{{eoStats.positions | number : '2.'}}</h2>
            </div>
          </div>
          <div *ngIf="eo.isSkillQualification">
            <div class="ml-5 mt-3 mb-1 w-fit mainBorder pr-4">
              <p class="mb-1"> {{("Employee" | labelReplacement)| async}}</p>
              <h2 class="mb-0">{{eoStats.employees | number : '2.'}}</h2>
            </div>
          </div>
          <div>
            <div class="ml-5 mt-3 mb-1 w-fit mainBorder pr-4">
              <p class="mb-1">{{("ILA" | labelReplacement)| async}}/Courses</p>
              <h2 class="mb-0">{{eoStats.ilAs | number : '2.'}}</h2>
            </div>
          </div>
          <div>
            <div class="ml-5 mt-3 mb-3 w-fit mainBorder pr-4">
              <p class="mb-1" style="white-space:nowrap;">Test Questions</p>
              <h2>{{eoStats.testQuestions | number : '2.'}}</h2>
            </div>
          </div>
          <div>
            <div class="ml-5 mt-3 mb-3 w-fit mainBorder pr-4">
              <p class="mb-1">{{("Task" | labelReplacement)| async}}s</p>
              <h2>{{eoStats.tasks | number : '2.'}}</h2>
            </div>
          </div>
          <div>
            <div class="ml-5 mt-3 mb-3 w-fit mainBorder pr-4">
              <p class="mb-1">{{("Procedure" | labelReplacement)| async}}s</p>
              <h2>{{eoStats.procedures | number : '2.'}}</h2>
            </div>
          </div>
          <div>
            <div class="ml-5 mt-3 mb-3 w-fit mainBorder pr-4">
              <p class="mb-1" style="white-space:nowrap;">{{("Safety Hazard" | labelReplacement)| async}}s</p>
              <h2>{{eoStats.safetyHazards | number : '2.'}}</h2>
            </div>
          </div>
          <div>
            <div class="ml-3 mt-3 mb-3 w-fit mr-3">
              <p class="mb-1">Regulations</p>
              <h2>{{eoStats.rRs | number : '2.'}}</h2>
            </div>
          </div>
        </div>
      </ng-container>
    </div>
    <ng-container>
      <mat-tab-group class="mt-5">
        <div *ngIf="eo.isSkillQualification">
          <mat-tab [label]="'Skill Training Guide' | uppercase">
            <ng-template matTabContent>
              <app-eo-skill-guide [isActive]="isActive"></app-eo-skill-guide>
            </ng-template>
          </mat-tab>
          <mat-tab label="{{(('Position' | labelReplacement)| async) | uppercase}}">
            <ng-template matTabContent>
              <app-eo-positions [isActive]="isActive"></app-eo-positions>
            </ng-template>
          </mat-tab>
          <mat-tab label="{{(('Employee' | labelReplacement)| async) | uppercase}}">
            <ng-template matTabContent>
              <app-eo-employees [isActive]="isActive"></app-eo-employees>
            </ng-template>
          </mat-tab>
        </div>
        <mat-tab label="{{(('Task' | labelReplacement)| async) | uppercase}}">
          <ng-template matTabContent>
            <app-eo-tasks [isActive]="isActive" [regTitle]="eo.number + ' ' + eo.description"></app-eo-tasks>
          </ng-template>
        </mat-tab>
        <mat-tab label="{{(('Procedure' | labelReplacement)| async) | uppercase}}s">
          <ng-template matTabContent>
            <app-eo-procedures [isActive]="isActive"  [regTitle]="eo.number + ' ' + eo.description"></app-eo-procedures>
          </ng-template>
        </mat-tab>
        <mat-tab label="{{(('Regulatory Requirement' | labelReplacement)| async) | uppercase}}s">
          <ng-template matTabContent>
            <app-eo-regulatory-requirements [regTitle]="eo.number + ' ' + eo.description" [isActive]="isActive">
            </app-eo-regulatory-requirements>
          </ng-template>
        </mat-tab>
        <mat-tab label="{{(('Safety Hazard' | labelReplacement)| async) | uppercase}}s">
          <ng-template matTabContent>
            <app-eo-safety-hazards [regTitle]="eo.number + ' ' + eo.description" [isActive]="isActive"></app-eo-safety-hazards>
          </ng-template>
        </mat-tab>
        <mat-tab label="{{(('ILA' | labelReplacement)| async) | uppercase}}s">
          <ng-template matTabContent>
            <app-eo-ilas [isActive]="isActive"  [regTitle]="eo.number + ' ' + eo.description"></app-eo-ilas>
          </ng-template>
        </mat-tab>
        <mat-tab [label]="'Test Questions' | uppercase">
          <ng-template matTabContent>
            <app-eo-test-questions [isActive]="isActive" [isMeta]="eo.isMetaEO" [eo]="eo.number + ' - ' + eo.description"></app-eo-test-questions>
          </ng-template>
        </mat-tab>
      </mat-tab-group>
    </ng-container>
  </div>

</ng-container>

<ng-container *ngIf="editView">
  <div class="ml-4 mr-4">
    <div class="flex flex-row mt-2 pb-4 border-b-2">
      <label class="defaultLabel" (click)="editView = true"
        [ngClass]="{'greenText': editView,'grayText':!editView}"><span class="mr-1" style="color:green"
          *ngIf="editView">●</span>Edit View</label>
      <span class="mx-2 text-gray-400"><strong>|</strong></span>
      <label class="defaultLabel" (click)="editView = false"
        [ngClass]="{'greenText': !editView,'grayText':editView}"><span class="mr-1" style="color:green"
          *ngIf="!editView">●</span>Live View</label>
    </div>
    <div class="flex flex-col mt-2">
      <div class="flex flex-row justify-between p-3">
        <div class="flex flex-row mt-2">
          <div class="mt-2 mr-3 iconSize">
            <app-icon icon="history"></app-icon>
          </div>
          <div class="flex flex-col space-y-0">
            <div class="flex flex-row space-x-2 space-y-0">
              <p class="font-bold text-sm mb-0">{{histStats.modified_by}}</p>
              <span class="font-light text-gray-400 text-sm">Last Modified {{histStats.modified_date |
                date:"medium"}}</span>
            </div>
            <div>
              <app-button variant="text" text="View All History">
              </app-button>
            </div>
          </div>
        </div>
        <div class="mt-2 flex flex-row gap-4">
          <label style="color:#5C9B31;" mat-button [matMenuTriggerFor]="export" class="mb-0 mt-2 mr-5 cursor-pointer">
            <app-icon icon="save_alt" class="mr-1"></app-icon>
            <span>Download As</span>
            <app-icon icon="keyboard_arrow_down"></app-icon>
          </label>
          <mat-menu #export="matMenu">
            <label [disabled]="editLoader" (click)="downloadPdf()" class="label_style" mat-menu-item>PDF</label>
            <label [disabled]="editLoader" (click)="downloadDocs()" class="label_style" mat-menu-item>Doc</label>
          </mat-menu>
          <p class="p-2 rounded-md" style="color:#4284C0;background-color: #EEF7FF;">Published</p>
        </div>
      </div>
    </div>
    <app-data-loader *ngIf="editLoader"></app-data-loader>
    <div *ngIf="!editLoader" #pdf class="bg-white m-4 shadow-sm p-4 flex flex-col">
      <div *ngIf="this.eo.enablingObjective_Category" class="ml-2 pb-4">
        <h2>Category</h2>
        <ol class="ml-4">
          <li>{{this.eo.enablingObjective_Category.title}}</li>
        </ol>
      </div>
      <div *ngIf="this.eo.enablingObjective_SubCategory" class="ml-2 pb-4">
        <h2>Sub Category</h2>
        <ol class="ml-4">
          <li>
            {{this.eo.enablingObjective_SubCategory.title}}
          </li>
        </ol>
      </div>
      <div class="ml-2 pb-4">
        <h2>Topic</h2>
        <div class="m-3" *ngIf="!this.eo.enablingObjective_Topic">
          <span>No Topic For this {{this.eo.isSkillQualification ? "SQ":"EO"}}</span>
        </div>
        <ol *ngIf="this.eo.enablingObjective_Topic" class="ml-4">
          <li>{{this.eo.enablingObjective_Topic.title}}</li>
        </ol>
      </div>
      <div class="ml-2 pb-4">
        <div class="flex flex-row justify-between">
          <h2>{{("Task" | labelReplacement)| async}}s</h2>
          <!-- <app-icon icon="link" style="color:#5C9B31;"></app-icon> -->
        </div>
        <div class="m-3" *ngIf="allEOData.tasksWithCount.length < 1">
          <span>No {{("Task" | labelReplacement)| async}}s Linked to Selected {{this.eo.isSkillQualification ? "SQ":"EO"}}</span>
        </div>
        <ol class="ml-4">
          <li *ngFor="let task of allEOData.tasksWithCount">
            <div class="flex flex-row justify-between w-full">
              <p>{{task.description}}</p>
              <!-- <app-icon style="color:lightgray;" icon="link_off"></app-icon> -->
            </div>
          </li>
        </ol>
      </div>
      <div class="ml-2 pb-4">
        <div class="flex flex-row justify-between">
          <h2>{{("Procedure" | labelReplacement)| async}}s</h2>
          <!-- <app-icon icon="link" style="color:#5C9B31;"></app-icon> -->
        </div>
        <div class="m-3" *ngIf="allEOData.proceduresWithCount.length < 1">
          <span>No {{("Procedure" | labelReplacement)| async}}s linked to Selected {{this.eo.isSkillQualification ? "SQ":"EO"}}</span>
        </div>
        <ol class="ml-4">
          <li *ngFor="let proc of allEOData.proceduresWithCount">
            <div class="flex flex-row justify-between w-full">
              <p>{{proc.description}}</p>
              <!-- <app-icon style="color:lightgray;" icon="link_off"></app-icon> -->
            </div>
          </li>
        </ol>
      </div>
      <div class="ml-2 pb-4">
        <div class="flex flex-row justify-between">
          <h2>{{("Regulatory Requirement" | labelReplacement)| async}}s</h2>
          <!-- <app-icon icon="link" style="color:#5C9B31;"></app-icon> -->
        </div>
        <div class="m-3" *ngIf="allEOData.rRsWithCount.length < 1">
          <span>No Regulations Linked to {{this.eo.isSkillQualification ? "SQ":"EO"}}</span>
        </div>
        <ol class="ml-4">
          <li *ngFor="let rr of allEOData.rRsWithCount">
            <div class="flex flex-row justify-between w-full">
              <p>{{rr.description}}</p>
              <!-- <app-icon style="color:lightgray;" icon="link_off"></app-icon> -->
            </div>
          </li>
        </ol>
      </div>
      <div class="ml-2 pb-4">
        <div class="flex flex-row justify-between">
          <h2>{{("Safety Hazard" | labelReplacement)| async}}s</h2>
          <!-- <app-icon icon="link" style="color:#5C9B31;"></app-icon> -->
        </div>
        <div class="m-3" *ngIf="allEOData.sHsWithCount.length < 1">
          <span>No {{("Safety Hazard" | labelReplacement)| async}}s Linked to Selected {{this.eo.isSkillQualification ? "SQ":"EO"}}</span>
        </div>
        <ol class="ml-4">
          <li *ngFor="let sh of allEOData.sHsWithCount">
            <div class="flex flex-row justify-between w-full">
              <p>{{sh.title}}</p>
              ?<app-icon style="color:lightgray;" icon="link_off"></app-icon>
            </div>
          </li>
        </ol>
      </div>
      <div class="ml-2 pb-4">
        <div class="flex flex-row justify-between">
          <h2>{{("ILA" | labelReplacement)| async}}s</h2>
          <!-- <app-icon icon="link" style="color:#5C9B31;"></app-icon> -->
        </div>
        <div class="m-3" *ngIf="allEOData.ilasWithCount.length < 1">
          <span>No {{("ILA" | labelReplacement)| async}}s Linked to Selected {{this.eo.isSkillQualification ? "SQ":"EO"}}</span>
        </div>
        <ol class="ml-4">
          <li *ngFor="let ila of allEOData.ilasWithCount">
            <div class="flex flex-row justify-between w-full">
              <p>{{ila.description}}</p>
              <!-- <app-icon style="color:lightgray;" icon="link_off"></app-icon> -->
            </div>

          </li>
        </ol>
      </div>
      <div class="ml-2 pb-4">
        <div class="flex flex-row justify-between">
          <h2>Test Questions</h2>
          <!-- <app-icon icon="link" style="color:#5C9B31;"></app-icon> -->
        </div>
        <div class="m-3" *ngIf="allEOData.tIsWithCount.length < 1">
          <span>No Test Questions Linked to Selected {{this.eo.isSkillQualification ? "SQ":"EO"}}</span>
        </div>
        <ol class="ml-4">
          <li *ngFor="let test of allEOData.tIsWithCount">
            <div class="flex flex-row justify-between w-full">
              <p [innerHTML]="test.description"></p>
              <!-- <app-icon style="color:lightgray;" icon="link_off"></app-icon> -->
            </div>
          </li>
        </ol>
      </div>
      <div *ngIf="eo.isSkillQualification" class="ml-2 pb-4">
        <div class="flex flex-row justify-between">
          <h2>{{("Position" | labelReplacement)| async}}s</h2>
          <!-- <app-icon icon="link" style="color:#5C9B31;"></app-icon> -->
        </div>
        <div class="m-3" *ngIf="allEOData.positionsWithCount.length < 1">
          <span>No {{("Position" | labelReplacement)| async}}s Linked to Selected SQ</span>
        </div>
        <ol class="ml-4">
          <li *ngFor="let pos of allEOData.positionsWithCount">
            <div class="flex flex-row justify-between w-full">
              <p [innerHTML]="pos.position.positionTitle"></p>
              <!-- <app-icon style="color:lightgray;" icon="link_off"></app-icon> -->
            </div>
          </li>
        </ol>
      </div>
      <div *ngIf="eo.isSkillQualification" class="ml-2 pb-4">
        <div class="flex flex-row justify-between">
          <h2> {{("Employee" | labelReplacement)| async}}</h2>
          <!-- <app-icon icon="link" style="color:#5C9B31;"></app-icon> -->
        </div>
        <div class="m-3" *ngIf="allEOData.employeesWithCount.length < 1">
          <span>No  {{("Employee" | labelReplacement)| async}} Linked to Selected SQ</span>
        </div>
        <ol class="ml-4">
          <li *ngFor="let emp of allEOData.employeesWithCount">
            <div class="flex flex-row justify-between w-full">
              <p [innerHTML]="emp.description"></p>
              <!-- <app-icon style="color:lightgray;" icon="link_off"></app-icon> -->
            </div>
          </li>
        </ol>
      </div>
    </div>
  </div>
</ng-container>


<ng-template #dialogModal>
  <app-qtd-dialogue [header]="header" [description]="description" cancelText="No" confirmText="Yes"
    [showEffectiveDateAndReason]="true" (canceled)="dialog.closeAll()"
    (confirmed)="true ? getDataWithReason($event) : getData()"></app-qtd-dialogue>
</ng-template>

<ng-template #editCopyEO>
  <app-flypanel-add-eo (refresEO)="getEOData();flyPanelService.close();" [changeCatSubTopic]="changeCatSubTopic"
    [makeCopy]="makeCopy" [eo]="eo" [hasSpace]="true" (closed)="flyPanelService.close()"></app-flypanel-add-eo>
</ng-template>

<ng-template #metaLink>
  <app-flypanel-meta-eo-link (refresh)="dataBroadcastService.refreshMeta.next(null);getLinkedEOs()" [alreadyLinked]="alreadyLinkedEOs"
    (closed)="flyPanelService.close();"></app-flypanel-meta-eo-link>
</ng-template>


<ng-template #unlinkDialog>
  <app-qtd-dialogue [header]="header" [description]="description" cancelText="No" confirmText="Yes"
    [showEffectiveDateAndReason]="true" (canceled)="dialog.closeAll()" (confirmed)="UnlinkEOs($event)">
  </app-qtd-dialogue>
</ng-template>

<ng-template #verPanel>
  <app-flypanel-eo-history [eoId]="eo.id" [isVersion]="true" [Title]="eo.description" [Number]="eo.number.toString()" (closed)="flyPanelService.close()"></app-flypanel-eo-history>
</ng-template>
