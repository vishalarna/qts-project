<div class="flex flex-col px-12 py-12">
    <div class="flex flex-row justify-between">
        <h2>Link Meta {{ ("Enabling Objective" | labelReplacement) | async }}</h2>
        <app-button ButtonType="icon" icon="close" (click)="flyPanelService.close()"></app-button>
    </div>

    <app-data-loader *ngIf="loader"></app-data-loader>

    <ng-container *ngIf="!loader">
        <div class="flex flex-row items-center border-b-0.8 border-gray-one">
            <div class="flex flex-grow">
                <app-icon icon="search"></app-icon>
                <input class="text-sm flex-grow focus:outline-none" placeholder="Search" type="text"
                    [value]="filterSearchString" (input)="searchFilter($event)" />
                <app-icon icon="close" class="cursor-pointer" *ngIf="filterSearchString"
                    (click)="clearSearchString()"></app-icon>
            </div>
        </div>

        <div class="flex flex-row mt-3 items-center text-gray-four justify-between text-xs btn-group">
            <div>
                <span> Showing:
                    <label mat-button [matMenuTriggerFor]="menu" class="mb-0">
                        <p *ngIf="showActive" class="font-bold">Active</p>
                        <p *ngIf="!showActive" class="font-bold">Inactive</p>
                    </label>
                    <app-icon icon="expand_more" [matMenuTriggerFor]="menu"></app-icon>
                </span>

                <mat-menu #menu="matMenu">
                    <label mat-menu-item *ngIf="!showActive" (click)="filterActive(true)">Active</label>
                    <label mat-menu-item *ngIf="showActive" (click)="filterActive(false)">Inactive</label>
                </mat-menu>
            </div>
        </div>

        <div class=" flex flex-col flex-wrap bg-gray-one mb-3 mt-3 px-3 py-3 rounded " *ngIf="metaEoCheckListSelection.selected.length > 0">
              <div class="flex flex-row w-full justify-between mb-3">
                <p class="text-xs text-gray-four pt-2"> {{ metaEoCheckListSelection.selected.length }} Meta {{"Enabling Objective"| labelReplacement| async }}s Selected</p>
                <app-button [disabled]="metaEoCheckListSelection.selected.length < 1" class="mb-2" type="button" (click)="linkMetaEnablingObjective()" color="secondary" size="sm" text="Link Objectives"></app-button>
              </div>
        </div>


        <ng-container *ngIf="metaEnablingObjectiveDataSource.data.length > 0">
            <div class="flex flex-col"> 
                <mat-tree [dataSource]="metaEnablingObjectiveDataSource" [treeControl]="metaEoControl" class="qtd-tree">
                    
                    <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">
                        <div class="mat-tree-node">
                            <button mat-icon-button matTreeNodeToggle [attr.aria-label]="'Toggle ' + node.description">
                                <app-icon
                                [icon]=" metaEoControl.isExpanded(node) ? 'expand_more' : 'chevron_right'">
                            </app-icon>
                        </button>
                        <mat-radio-button [checked] = "isNestedTreeNode(node)" [disabled]="true" ></mat-radio-button>
                        <span class="ml-1 pb-1">{{ node.description }}</span>
                    </div>
                    <!-- There is inline padding applied to this div using styles.
                        This padding value depends on the mat-icon-button width.  -->
                        <div [class.qtd-tree-invisible]="!metaEoControl.isExpanded(node)" role="group">
                            <ng-container matTreeNodeOutlet></ng-container>
                        </div>
                    </mat-nested-tree-node>
                    
                    <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle matTreeNodePadding >
                        <mat-radio-button [checked]="isEoChecked(node)" (change)="onMetaEOChange($event.source.checked, node)" name="metEoRadio">{{ node.description }}</mat-radio-button>
                    </mat-tree-node>
                </mat-tree>
            </div>
        </ng-container>
        <ng-container *ngIf="metaEnablingObjectiveDataSource.data.length <= 0" class="flex flex-col">
            <span>No Data Found</span>
        </ng-container> 
    </ng-container>
</div>

